// File: frontend/src/styles/views/_public-home.scss
/**
 * @file _public-home.scss
 * @description Styles specific to the PublicHome view for "Ephemeral Harmony" theme.
 * Includes styling for the public agent selector, rate limit banner, and welcome placeholders.
 * @version 2.0.0
 */

@use '../abstracts/variables' as var;
@use '../abstracts/mixins' as mixins;
@use '../components/buttons' as buttonsFile;

.public-home-view-ephemeral {
  // Overall container for the public home view, typically full height.
  // Most styling is handled by UnifiedChatLayout and its children.
}

// Container for the agent selector, positioned above the main content area
.public-agent-selector-container-ephemeral {
  padding: var.$spacing-xs var.$spacing-md; // Reduced padding for a tighter fit
  margin-bottom: var.$spacing-sm; // Space below selector before content
  display: flex;
  justify-content: center; // Center the selector button/dropdown
  position: sticky; // Stick to top of scrollable main content area in UnifiedChatLayout
  top: 0;
  z-index: calc(var.$z-index-content-overlay + 1); // Above content, below header dropdowns
  background-color: hsla(var(--color-bg-primary-h), var(--color-bg-primary-s), var(--color-bg-primary-l), 0.6);
  backdrop-filter: blur(3px); // Slight blur for the sticky bar
  border-bottom: 1px solid hsla(var(--color-border-secondary-h), var(--color-border-secondary-s), var(--color-border-secondary-l), 0.2);
}

.agent-selector-button-ephemeral {
  @include buttonsFile.btn;
  @include mixins.neomorphic-extrude( // Give it a tactile feel
    hsl(var(--color-bg-secondary-h), var(--color-bg-secondary-s), var(--color-bg-secondary-l)),
    3px, 6px, var(--shadow-opacity-soft),var.$radius-lg,
    var(--shadow-color-h), var(--color-shadow-s), var(--color-shadow-l),
    calc(var(--color-shadow-l) + var(--shadow-highlight-modifier))
  );
  padding: var.$spacing-xs var.$spacing-md !important;
  font-size: var.$font-size-sm !important;
  color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));
  min-width: 220px; // Good width for selector
  display: flex;
  justify-content: space-between;
  align-items: center;

  .selected-agent-icon {
    width: 1.25em; height: 1.25em;
    margin-right: var.$spacing-sm;
    opacity: 0.8;
  }
  .chevron-icon {
    width: 1em; height: 1em;
    transition: transform var.$duration-quick var.$ease-out-quad;
    &.open { transform: rotate(180deg); }
  }

  &:hover {
    filter: brightness(1.05);
    color: hsl(var(--color-text-primary-h), var(--color-text-primary-s), var(--color-text-primary-l));
    .selected-agent-icon { opacity: 1; }
  }
}

.agent-selector-dropdown-panel-ephemeral {
  // Use the same styling as UserSettingsDropdown or VoiceControlsDropdown for consistency
  // This assumes a neomorphic card style for dropdowns
  @include mixins.neomorphic-extrude(
    hsl(var(--color-bg-primary-h), var(--color-bg-primary-s), var(--color-bg-primary-l)),
    4px, 10px, var(--shadow-opacity-soft), var.$radius-lg,
    var(--shadow-color-h), var(--color-shadow-s), var(--color-shadow-l),
    calc(var(--color-shadow-l) + var(--shadow-highlight-modifier))
  );
  position: absolute;
  top: calc(100% + #{var.$spacing-xs});
  left: 50%;
  transform: translateX(-50%); // Center below button
  z-index: var.$z-index-dropdown;
  width: 260px; // Good width for agent names
  padding: var.$spacing-xs;
  
  .dropdown-header-holographic, .dropdown-content-holographic, .dropdown-item-holographic, .mode-icon-dd-holographic, .dropdown-item-label, .checkmark-icon-active {
    // These classes are from UserSettingsDropdown.vue, adopt or adapt them
    // Example .dropdown-item-holographic:
    // @include buttonsFile.btn-ghost; width: 100%; justify-content: flex-start !important; ...
  }
   .dropdown-header-holographic {
    padding: var.$spacing-xs var.$spacing-sm;
    border-bottom: 1px solid hsla(var(--color-border-secondary-h),var(--color-border-secondary-s),var(--color-border-secondary-l),0.2);
    margin-bottom: var.$spacing-xs;
    .dropdown-title {
      font-size: var.$font-size-xs;
      font-weight: 600;
      color: hsl(var(--color-text-muted-h),var(--color-text-muted-s),var(--color-text-muted-l));
      text-transform: uppercase;
    }
  }
  .dropdown-content-holographic { max-height: 250px; overflow-y: auto; }
  .dropdown-item-holographic {
    @include buttonsFile.btn-ghost;
    width: 100%; justify-content: flex-start !important; align-items: center;
    padding: var.$spacing-sm !important;
    border-radius: var.$radius-md !important;
    font-size: var.$font-size-sm !important;
    &.active {
      background-color: hsla(var(--color-accent-interactive-h),var(--color-accent-interactive-s),var(--color-accent-interactive-l),0.15);
      color: hsl(var(--color-accent-interactive-h),var(--color-accent-interactive-s),var(--color-accent-interactive-l));
    }
    .mode-icon-dd-holographic {
      width: 28px; height: 28px; padding: var.$spacing-xs; border-radius: var.$radius-sm;
      display: flex; align-items: center; justify-content: center; flex-shrink: 0;
      margin-right: var.$spacing-sm;
      background-color: hsla(var(--color-bg-tertiary-h),var(--color-bg-tertiary-s),var(--color-bg-tertiary-l),0.5);
    }
    .dropdown-item-label { flex-grow: 1; text-align: left; }
    .checkmark-icon-active { margin-left: auto; color: hsl(var(--color-accent-interactive-h),var(--color-accent-interactive-s),var(--color-accent-interactive-l));}
  }
}


.rate-limit-banner-ephemeral {
  padding: var.$spacing-lg;
  margin: var.$spacing-lg auto;
  max-width: 550px;
  border-radius: var.$radius-xl;
  text-align: center;
  font-size: var.$font-size-base;
  @include mixins.glassmorphic-pane(
    hsla(var(--color-warning-h), var(--color-warning-s), var(--color-warning-l), 0.1),
    hsla(var(--color-warning-h), var(--color-warning-s), var(--color-warning-l), 0.4),
    calc(var(--blur-glass) * 0.7),
    var(--shadow-depth-md)
  );
  color: hsl(var(--color-warning-h), var(--color-warning-s), calc(var(--color-warning-l) - 20%)); // Darker text on warning bg

  .banner-icon-ephemeral { width: 3rem; height: 3rem; margin: 0 auto var.$spacing-md; opacity: 0.8; }
  .banner-title-ephemeral {
    font-size: var.$font-size-lg * 1.1; font-weight: 600; margin-bottom: var.$spacing-xs;
    color: hsl(var(--color-warning-h), var(--color-warning-s), calc(var(--color-warning-l) - 15%));
  }
  .banner-text-ephemeral { opacity: 0.9; line-height: 1.6; strong { font-weight: 600; } }
  .login-prompt-link-ephemeral {
    @include buttonsFile.btn-primary;
    @include buttonsFile.btn-sm-modifier;
    margin-top: var.$spacing-md;
    display: inline-flex; // For icon alignment
    align-items: center;
    .icon-sm { margin-right: var.$spacing-xs; }
  }
}

.public-welcome-placeholder-ephemeral {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  text-align: center; padding: var.$spacing-xl; margin: var.$spacing-lg auto;
  max-width: 650px; min-height: 350px;
  @include mixins.glassmorphic-pane(
    hsla(var(--color-bg-secondary-h), var(--color-bg-secondary-s), var(--color-bg-secondary-l), 0.6),
    hsla(var(--color-border-glass-h), var(--color-border-glass-s), var(--color-border-glass-l), 0.25),
    var(--blur-glass), var(--shadow-depth-md)
  );
  border-radius: var.$radius-2xl;

  .hero-icon-ephemeral {
    width: 4.5rem; height: 4.5rem; margin-bottom: var.$spacing-lg;
    color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l));
    opacity: 0.65; animation: subtlePulse var.$duration-pulse-long * 1.2 infinite;
    --scale-pulse: 1.04; --opacity-pulse: 0.85;
  }
  .welcome-title-ephemeral {
    font-family: var(--font-family-display); font-size: var.$font-size-xl * 1.6; font-weight: 600;
    color: hsl(var(--color-text-primary-h), var(--color-text-primary-s), var(--color-text-primary-l));
    margin-bottom: var.$spacing-md; @include mixins.text-glow('--color-accent-primary', 7px, 0.5);
  }
  .welcome-subtitle-ephemeral {
    color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));
    line-height: 1.7; max-width: 55ch; font-size: var.$font-size-base * 1.05;
    .link-ephemeral { font-weight: 500; }
  }
}

.main-content-view-wrapper-ephemeral {
  height: 100%; // Ensure it fills the slot from UnifiedChatLayout
  width: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.loading-placeholder-ephemeral { // For when agent content is loading
  display: flex; align-items: center; justify-content: center;
  height: 100%; width: 100%;
  // Uses .loading-animation-content, .loading-spinner-ephemeral, .loading-text-ephemeral from _loading-overlay.scss
}