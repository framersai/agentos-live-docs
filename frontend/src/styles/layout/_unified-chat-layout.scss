// File: frontend/src/styles/layout/_unified-chat-layout.scss
/**
 * @file _unified-chat-layout.scss
 * @description Styles for the UnifiedChatLayout.vue component.
 * @version 2.3.0 - Added widescreen centering. Ensured robust padding for fixed elements.
 */

@use '../abstracts/variables' as var;
@use '../abstracts/mixins' as mixins;

.unified-chat-layout-wrapper {
  @apply relative flex flex-col w-full h-full overflow-hidden;
  background-color: hsl(var(--color-bg-primary-h, var.$default-color-bg-primary-h), var(--color-bg-primary-s, var.$default-color-bg-primary-s), var(--color-bg-primary-l, var.$default-color-bg-primary-l));
  color: hsl(var(--color-text-primary-h, var.$default-color-text-primary-h), var(--color-text-primary-s, var.$default-color-text-primary-s), var(--color-text-primary-l, var.$default-color-text-primary-l));

  // CSS custom properties for dynamic heights, set by JS in UnifiedChatLayout.vue
  --header-actual-height: #{var.$header-height-default};
  --ephemeral-log-actual-height: 0px;
  // Default guess; JS will update based on VoiceInput.vue's actual rendered height
  --voice-input-actual-height: 100px; // Unified fallback, JS should be accurate

  // Padding to account for fixed header, ephemeral log (if shown), and fixed voice input
  // These are applied to the main wrapper to ensure content within scrolls correctly.
  padding-top: calc(var(--header-actual-height) + var(--ephemeral-log-actual-height) + #{var.$spacing-sm} + env(safe-area-inset-top, 0px)); // Increased top spacing slightly
  padding-bottom: calc(var(--voice-input-actual-height) + #{var.$spacing-sm} + env(safe-area-inset-bottom, 0px)); // Increased bottom spacing slightly
  padding-left: calc(var.$spacing-sm + env(safe-area-inset-left, 0px)); // Default side padding
  padding-right: calc(var.$spacing-sm + env(safe-area-inset-right, 0px)); // Default side padding

  // Widescreen Centering (1280px and up as requested)
  @media (min-width: var.$breakpoint-xl) { // breakpoint-xl is 1280px
    max-width: var.$site-max-width; // Use a variable for max-width, e.g., 1440px or 1600px
    margin-left: auto;
    margin-right: auto;
    // Consider slightly more horizontal padding within the centered layout on very wide screens
    padding-left: calc(var.$spacing-lg + env(safe-area-inset-left, 0px));
    padding-right: calc(var.$spacing-lg + env(safe-area-inset-right, 0px));
    
    // Optional: Add a subtle border or shadow to the centered layout on XL screens if it's not edge-to-edge with body bg
    // border-left: 1px solid hsla(var(--color-border-primary-h), var(--color-border-primary-s), var(--color-border-primary-l), 0.1);
    // border-right: 1px solid hsla(var(--color-border-primary-h), var(--color-border-primary-s), var(--color-border-primary-l), 0.1);
  }
}

.unified-chat-background-effects {
  // This should apply to the viewport if layout is centered, or be contained within the centered wrapper.
  // If .unified-chat-layout-wrapper is centered, these effects will be contained within it.
  // If the effects should be fullscreen even when the layout is centered, this div needs to be outside .unified-chat-layout-wrapper in App.vue.
  // Assuming for now they are contained within the centered layout.
  @apply absolute inset-0 -z-10 overflow-hidden pointer-events-none;

  .fixed-holo-grid { /* ... remains same ... */ }
  .orbit-container { /* ... remains same ... */ }
  .orbiting-shape { /* ... remains same ... */ }
}

.unified-main-content-area {
  @apply flex-grow flex flex-col relative overflow-hidden min-h-0;
  // This area itself doesn't scroll; its direct child (e.g., ChatWindow via MainContentView) should.
  // It will respect the padding of .unified-chat-layout-wrapper.
}

.unified-voice-input-section {
  @apply fixed bottom-0 left-0 right-0 z-20;
  // If .unified-chat-layout-wrapper is centered with max-width,
  // this fixed element needs to also respect that max-width and centering.
  // This is achieved by placing it *inside* .unified-chat-layout-wrapper in the template.
  // The current template structure does this, so this fixed section will be contained
  // within the centered .unified-chat-layout-wrapper.
  // The padding-bottom on .unified-chat-layout-wrapper already accounts for its height.
  // We might want to add padding to the *content* of .unified-voice-input-section
  // to align with the layout's side padding.
  padding-left: calc(var.$spacing-sm + env(safe-area-inset-left, 0px));
  padding-right: calc(var.$spacing-sm + env(safe-area-inset-right, 0px));
  // This padding ensures the VoiceInput component itself is inset like the main content.
  // The actual background of VoiceInput will appear edge-to-edge of the centered layout.

  @media (min-width: var.$breakpoint-xl) {
    padding-left: calc(var.$spacing-lg + env(safe-area-inset-left, 0px));
    padding-right: calc(var.$spacing-lg + env(safe-area-inset-right, 0px));
  }
}

// Keyframes remain the same
// Ensure these keyframes exist in your _keyframes.scss or a relevant animation file
@keyframes holoGridScroll {
  0% { background-position: 0% 0%; }
  100% { background-position: 100% 100%; }
}
@keyframes orbitPathRotation {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
@keyframes shapeTransformAndFade {
  0% { transform: scale(0.8) rotate(0deg); opacity: 0.5; }
  50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
  100% { transform: scale(0.8) rotate(360deg); opacity: 0.5; }
}