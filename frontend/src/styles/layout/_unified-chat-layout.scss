// File: frontend/src/styles/layout/_unified-chat-layout.scss
/**
 * @file _unified-chat-layout.scss
 * @description Styles for the UnifiedChatLayout component.
 * Defines the main structure for chat interaction views (PublicHome, PrivateHome).
 * @version 1.0.0
 */

@use '../abstracts/variables' as var;
@use '../abstracts/mixins' as mixins;

.unified-chat-layout-wrapper {
  display: flex;
  flex-direction: column;
  height: 100%; // Assumes parent provides a constrained height (e.g., flex-grow in App.vue main area)
  overflow: hidden; // Important to contain child elements
  position: relative; // For absolute/fixed positioning of children like ephemeral chat
}

// This container will have the subtle background effects
.unified-chat-background-effects {
  position: fixed; // Cover the entire viewport behind the main UI
  inset: 0;
  overflow: hidden;
  z-index: var.$z-index-negative; // Ensure it's behind everything

  // Example: Subtle orbiting shapes (from PrivateHome.vue original concept)
  .orbit-container {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 1px;
    height: 1px;
    animation-name: orbitEffect; // Define orbitEffect in _keyframes.scss
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    opacity: 0; // Start hidden, fade in with JS or animation delay
  }
  .orbiting-shape {
    position: absolute;
    left: 0;
    top: 0;
    transform-origin: center center;
    animation-name: shapeTransformEffect; // Define in _keyframes.scss
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
    animation-direction: alternate;
  }

  // Example: Static Holographic Grid
  .fixed-holo-grid {
    position: absolute;
    inset: 0;
    background-image: var(--bg-holo-grid-pattern); // Defined in _variables or _themes
    background-size: var(--bg-holo-grid-size, 40px) var(--bg-holo-grid-size, 40px);
    opacity: var(--bg-holo-grid-opacity, 0.05); // Themeable
    animation: holoGridScroll var.$duration-pulse-long * 5 linear infinite; // Very slow scroll
  }
}


.unified-main-content-area {
  flex-grow: 1;
  display: flex; // Use flex to manage internal layout (e.g., if main content has a sidebar concept for some agents)
  position: relative; // For stacking context if needed
  overflow: hidden; // Main content area itself might need to clip or scroll its children
  // The actual content (agent UI, markdown view) will handle its own scrolling
  // Padding is applied to the children or directly to this if it's a simple container
  padding-top: calc(var(--chat-log-height, 200px) + var.$spacing-md + var.$spacing-sm); // Space for EphemeralChatLog and Header
  padding-bottom: calc(var(--footer-height, 56px) + var.$spacing-md); // Space for VoiceInput area, assuming VoiceInput has its own internal padding.
  padding-left: var.$spacing-md;
  padding-right: var.$spacing-md;

  // Glass pane styling for the main interaction area
  @include mixins.glassmorphic-pane(
    hsla(var(--color-bg-secondary-h), var(--color-bg-secondary-s), var(--color-bg-secondary-l), 0.6), // Slightly more transparent than panel
    hsla(var(--color-border-glass-h), var(--color-border-glass-s), var(--color-border-glass-l), 0.3),
    calc(var(--blur-glass) * 1.2), // Slightly more blur for main content area backdrop
    var(--shadow-depth-sm) // Softer shadow, as it's a large area
  );
  border-radius: var.$radius-2xl;
  margin: var.$spacing-sm; // Margin around the main content pane

  // This is where the <slot> for actual agent UI or MainContentView will go
  // Ensure the slot's direct child takes up full height/width and handles its own scrolling.
  > :deep(*) { // Targeting the slotted content's root
    flex-grow: 1;
    overflow-y: auto; // Default for slotted content
    @include mixins.custom-scrollbar(
      hsla(var(--color-accent-secondary-h), var(--color-accent-secondary-s), var(--color-accent-secondary-l), 0.4),
      transparent
    );
  }
}

.unified-voice-input-section {
  flex-shrink: 0; // Voice input should not shrink
  position: sticky; // Sticky at the bottom of the layout wrapper
  bottom: 0;
  z-index: var.$z-index-content-overlay + 5; // Above main content, below modals
  padding: var.$spacing-sm var.$spacing-md; // Padding around the VoiceInput component itself

  // VoiceInput.vue itself will have its glassmorphic panel style
  // This container provides spacing and ensures it's sticky.
  // Optional: Add a subtle backdrop or separator for this section
  // background: linear-gradient(to top, hsla(var(--color-bg-primary-h), var(--color-bg-primary-s), var(--color-bg-primary-l), 0.3), transparent);
}

// Keyframes for background effects (should be in _keyframes.scss but placed here for context if used by this layout directly)
@keyframes orbitEffect { /* ... define ... */ }
@keyframes shapeTransformEffect { /* ... define ... */ }
// holoGridScroll should also be in _keyframes.scss