// File: frontend/src/styles/layout/_unified-chat-layout.scss
/**
 * @file _unified-chat-layout.scss
 * @description Styles for the UnifiedChatLayout.vue component.
 * This layout structures chat-centric views, managing the placement and appearance
 * of the EphemeralChatLog, the main content display area (hosting ChatWindow),
 * and the VoiceInput section. Includes dynamic background effects.
 *
 * @role Defines the specific layout and background styling for unified chat interaction views.
 * @dependencies `../abstracts/variables`, `../abstracts/mixins`.
 * @assumptions UnifiedChatLayout.vue component structure uses classes like `.unified-chat-layout-wrapper`,
 * `.unified-chat-background-effects`, `.unified-main-content-area`, etc.
 * CSS custom properties for theming are available.
 * Keyframe animations for background effects are defined in `_keyframes.scss`.
 * @version 1.1.1 - Corrected SASS calculation for animation duration using CSS calc().
 */

@use '../abstracts/variables' as var;
@use '../abstracts/mixins' as mixins;

.unified-chat-layout-wrapper {
  display: flex;
  flex-direction: column;
  height: 100%; // Crucial for taking up all space provided by its parent
  overflow: hidden; // This wrapper itself should not scroll; its children will.
  position: relative; // Context for absolutely positioned background effects and ephemeral log.

  // --- Background Effects Container ---
  .unified-chat-background-effects {
    position: absolute;
    inset: 0;
    overflow: hidden;
    z-index: 0; // Base layer for this layout

    .fixed-holo-grid {
      position: absolute;
      inset: 0;
      background-image: var(--bg-holo-grid-pattern-chat-layout, var(--bg-holo-grid-pattern));
      background-size: var(--bg-holo-grid-size-chat-layout, 70px) var(--bg-holo-grid-size-chat-layout, 70px);
      opacity: var(--bg-holo-grid-opacity-chat-layout, 0.015);
      // Corrected animation duration calculation:
      animation: holoGridScroll calc(#{var.$duration-pulse-long} * 20) linear infinite alternate; // Extremely slow animation
      pointer-events: none;
    }

    .orbit-container {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 1px; height: 1px;
      pointer-events: none;
    }
    .orbiting-shape {
      position: absolute;
      left: 0; top: 0;
      transform-origin: center center;
      pointer-events: none;
    }
  }

  // --- Main Content Area (for ChatWindow.vue or specific Agent Views) ---
  .unified-main-content-area {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 1;
    overflow: hidden; // ChatWindow will handle its own internal scrolling
    // Padding to account for fixed/sticky Header, EphemeralChatLog (if shown), and VoiceInput footer.
    // Using CSS variables for these heights makes it more maintainable.
    padding-top: calc(var(--header-actual-height, #{var.$header-height-default}) + var(--ephemeral-log-total-height, 0px) + #{var.$spacing-sm});
    padding-bottom: calc(var(--voice-input-panel-total-height, 120px) + #{var.$spacing-sm});
    padding-left: var.$spacing-xs;
    padding-right: var.$spacing-xs;

    @media (min-width: var.$breakpoint-md) {
      padding-left: var.$spacing-sm;
      padding-right: var.$spacing-sm;
    }
  }

  // --- Voice Input Section (for VoiceInput.vue) ---
  .unified-voice-input-section {
    flex-shrink: 0;
    position: sticky;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: calc(var.$z-index-content-overlay + 10);
    padding: var.$spacing-sm var.$spacing-md;
    // Example of a subtle backdrop for this section:
    // background: linear-gradient(to top, hsla(var(--color-bg-primary-h), var(--color-bg-primary-s), var(--color-bg-primary-l), 0.45) 0%, transparent 100%);
    // backdrop-filter: blur(1px);
    // pointer-events: none; // Wrapper if it's just for backdrop
    // > * { pointer-events: auto; } // VoiceInput component itself is interactive
  }
}
