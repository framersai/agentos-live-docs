// File: frontend/src/styles/base/_typography.scss
/**
 * @file _typography.scss
 * @description Global typographic styles, font imports (if self-hosted), and base styling
 * for text elements. Uses CSS custom properties for theme-aware typography.
 * @version 2.0.0
 */

@use '../abstracts/variables' as var;

// -----------------------------------------------------------------------------
// Font Imports (if self-hosting)
// -----------------------------------------------------------------------------
// Example for self-hosting (ensure font files are in public/assets/fonts/ or similar)
/*
@font-face {
  font-family: 'Lexend Deca';
  src: url('/assets/fonts/lexenddeca-variablefont_wght.woff2') format('woff2-variations');
  font-weight: 100 900; // If variable font
  font-display: swap;
}
// Inter and JetBrains Mono are typically loaded from Google Fonts via index.html or ThemeManager if needed.
// If loading all fonts via SCSS:
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&family=Lexend+Deca:wght@300;400;500;600;700&display=swap');
*/

// -----------------------------------------------------------------------------
// Base Typography Styles
// -----------------------------------------------------------------------------

body {
  font-family: var(--font-sans, #{var.$font-family-sans});
  font-size: var.$font-size-base;
  line-height: var.$line-height-base;
  color: hsl(var(--color-text-primary-h), var(--color-text-primary-s), var(--color-text-primary-l));
  background-color: hsl(var(--color-bg-primary-h), var(--color-bg-primary-s), var(--color-bg-primary-l));
  // Transition for smooth theme changes
  transition: color var.$duration-smooth var.$ease-out-quad, background-color var.$duration-smooth var.$ease-out-quad;
}

p {
  margin-bottom: var.$spacing-md;
  color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));
  line-height: var.$line-height-base * 1.1; // Slightly more line height for paragraphs
  text-wrap: pretty; // Enhance readability for paragraphs
}

// Headings
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-display, #{var.$font-family-display});
  color: hsl(var(--color-text-primary-h), var(--color-text-primary-s), var(--color-text-primary-l));
  line-height: var.$line-height-heading;
  margin-top: var.$spacing-lg;
  margin-bottom: var.$spacing-sm;
  font-weight: 600; // Default medium-bold for display font
  text-wrap: balance; // Prevent typographic widows in headings
}

h1 { font-size: clamp(2rem, 1.5rem + 2.5vw, 3.5rem); font-weight: 700; } // Responsive font size
h2 { font-size: clamp(1.75rem, 1.25rem + 2vw, 2.75rem); font-weight: 700; }
h3 { font-size: clamp(1.5rem, 1.1rem + 1.5vw, 2.25rem); }
h4 { font-size: clamp(1.25rem, 1rem + 1vw, 1.75rem); }
h5 { font-size: clamp(1.125rem, 0.9rem + 0.5vw, 1.5rem); font-weight: 500; }
h6 { font-size: var.$font-size-base; font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em; }

// Links
a {
  color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l));
  text-decoration: none; // Minimalist approach, underline on hover/focus
  transition: color var.$duration-quick var.$ease-out-quad, text-decoration-color var.$duration-quick var.$ease-out-quad;

  &:hover,
  &:focus-visible { // Combined for visual consistency
    color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), calc(var(--color-accent-primary-l) - 10%)); // Slightly darken/saturate
    text-decoration: underline;
    text-decoration-color: hsla(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l), 0.5);
    text-underline-offset: 2px;
  }
  // Focus visible styling handled globally in _global.scss or by Tailwind focus utilities
}

// Code blocks and inline code
code, kbd, samp, pre {
  font-family: var(--font-mono, #{var.$font-family-mono});
  font-size: var.$font-size-sm; // Slightly smaller for code
  color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l)); // Default code color
}

// Inline code
code:not(pre > code) {
  background-color: hsla(var(--color-bg-tertiary-h), var(--color-bg-tertiary-s), var(--color-bg-tertiary-l), 0.5);
  padding: 0.15em 0.4em;
  border-radius: var.$radius-sm;
  border: 1px solid hsla(var(--color-border-primary-h), var(--color-border-primary-s), var(--color-border-primary-l), 0.3);
  color: hsl(var(--color-accent-secondary-h), var(--color-accent-secondary-s), var(--color-accent-secondary-l)); // Use a distinct accent for inline code
}

// Preformatted text (code blocks)
pre {
  background-color: hsl(var(--color-bg-tertiary-h), var(--color-bg-tertiary-s), var(--color-bg-tertiary-l));
  border: 1px solid hsl(var(--color-border-primary-h), var(--color-border-primary-s), var(--color-border-primary-l));
  padding: var.$spacing-md;
  border-radius: var.$radius-lg;
  overflow-x: auto;
  line-height: var.$line-height-base * 0.95; // Slightly tighter for code
  // Syntax highlighting colors will be applied by highlight.js or similar
  // Ensure a base text color for highlighted code
  code {
    color: hsl(var(--color-text-primary-h), var(--color-text-primary-s), var(--color-text-primary-l));
    font-size: 0.875em; // Ensure pre > code is also slightly smaller if not inherited
    background-color: transparent; // Reset inline code background
    padding: 0;
    border: none;
  }
}

// Lists
ul, ol {
  margin-left: var.$spacing-lg;
  margin-bottom: var.$spacing-md;
  color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));
  li {
    margin-bottom: var.$spacing-xs;
    padding-left: var.$spacing-sm; // Space for marker
    position: relative;
  }
}

ul li::before {
  content: 'â€¢'; // Basic bullet, can be customized (SVG, image, or ::marker)
  color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l));
  position: absolute;
  left: 0;
  font-weight: bold;
}

ol {
  list-style-type: decimal; // Or other types like lower-alpha, etc.
  li::before {
    content: none; // Use browser's default counter
  }
}

// Blockquotes
blockquote {
  margin: var.$spacing-md 0;
  padding: var.$spacing-sm var.$spacing-md;
  border-left: var.$border-width-thicker solid hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l));
  background-color: hsla(var(--color-bg-secondary-h), var(--color-bg-secondary-s), var(--color-bg-secondary-l), 0.3);
  border-radius: 0 var.$radius-md var.$radius-md 0;
  color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));

  p {
    margin-bottom: var.$spacing-xs;
    &:last-child {
      margin-bottom: 0;
    }
  }
  cite {
    display: block;
    margin-top: var.$spacing-xs;
    font-style: italic;
    font-size: var.$font-size-sm;
    color: hsl(var(--color-text-muted-h), var(--color-text-muted-s), var(--color-text-muted-l));
  }
}

// Horizontal Rule
hr {
  border: 0;
  height: 1px;
  background: linear-gradient(to right,
    transparent,
    hsla(var(--color-border-primary-h), var(--color-border-primary-s), var(--color-border-primary-l), 0.5) 50%,
    transparent
  );
  margin: var.$spacing-xl 0;
}

// Selection styles
::selection {
  background-color: hsla(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l), 0.7);
  color: hsl(var(--color-text-on-primary-h), var(--color-text-on-primary-s), var(--color-text-on-primary-l)); // Ensure high contrast
  text-shadow: none;
}