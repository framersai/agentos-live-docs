// File: frontend/src/styles/base/_typography.scss
/**
 * @file _typography.scss
 * @description Global typographic styles, font imports (if self-hosted), and base styling
 * for text elements. Uses CSS custom properties for theme-aware typography. Enhanced for readability.
 * @version 3.0.0
 */

@use '../abstracts/variables' as var;
@use '../abstracts/mixins' as mixins; // For text-glow mixin

// Font imports are handled in index.html via Google Fonts link.

// -----------------------------------------------------------------------------
// Base Typography Styles (already partially covered in _global.scss for body)
// This file will focus on specific text elements like p, h1-h6, code, etc.
// -----------------------------------------------------------------------------

p {
  margin-bottom: var.$spacing-md;
  color: hsl(var(--color-text-secondary-h, var.$default-color-text-secondary-h), var(--color-text-secondary-s, var.$default-color-text-secondary-s), var(--color-text-secondary-l, var.$default-color-text-secondary-l));
  line-height: var(--line-height-base, var.$line-height-base-default);
  text-wrap: pretty; // Enhance readability
  max-width: 75ch; // Optimal line length for readability
}

// Headings - Enhanced hierarchy and spacing
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-display, var.$font-family-display);
  color: hsl(var(--color-text-primary-h, var.$default-color-text-primary-h), var(--color-text-primary-s, var.$default-color-text-primary-s), var(--color-text-primary-l, var.$default-color-text-primary-l));
  line-height: var.$line-height-heading;
  margin-top: var.$spacing-lg * 1.5; // More top margin for headings
  margin-bottom: var.$spacing-md;
  font-weight: 700; // Bolder headings by default
  text-wrap: balance; // Prevent typographic widows
  letter-spacing: -0.01em; // Slight tightening for display fonts

  // Subtle text glow for top-level headings (optional, theme-dependent)
  &.heading-glow { // Add this class to specific headings for the effect
    @include mixins.text-glow('--color-accent-primary', 4px, 0.3);
  }
}

// Increased font sizes for better visual hierarchy (responsive)
h1 { font-size: clamp(2.25rem, 1.5rem + 3vw, 4rem); letter-spacing: -0.025em; }
h2 { font-size: clamp(1.875rem, 1.25rem + 2.5vw, 3rem); letter-spacing: -0.02em; }
h3 { font-size: clamp(1.625rem, 1.1rem + 2vw, 2.25rem); font-weight: 600; }
h4 { font-size: clamp(1.375rem, 1rem + 1.5vw, 1.875rem); font-weight: 600; }
h5 { font-size: clamp(1.125rem, 0.9rem + 1vw, 1.5rem); font-weight: 600; } // Make h5 bolder
h6 { font-size: var(--font-size-base, var.$font-size-base-default); font-weight: 600; text-transform: uppercase; letter-spacing: 0.075em; opacity: 0.9; }


// Code blocks and inline code
code, kbd, samp, pre {
  font-family: var(--font-family-monospace, var.$font-family-mono);
  font-size: 0.925em; // Slightly smaller relative to surrounding text
  color: hsl(var(--color-text-secondary-h, var.$default-color-text-secondary-h), var(--color-text-secondary-s, var.$default-color-text-secondary-s), var(--color-text-secondary-l, var.$default-color-text-secondary-l));
  letter-spacing: 0.01em; // Slightly more spacing for mono
}

// Inline code - enhanced holographic feel
code:not(pre > code) {
  background-color: hsla(var(--color-bg-tertiary-h, var.$default-color-bg-tertiary-h), var(--color-bg-tertiary-s, var.$default-color-bg-tertiary-s), var(--color-bg-tertiary-l, var.$default-color-bg-tertiary-l), 0.4);
  padding: 0.2em 0.45em; // Adjusted padding
  border-radius: var.$radius-sm;
  border: 1px solid hsla(var(--color-border-secondary-h, var.$default-color-border-secondary-h), var(--color-border-secondary-s, var.$default-color-border-secondary-s), var(--color-border-secondary-l, var.$default-color-border-secondary-l), 0.4);
  color: hsl(var(--color-text-accent-h, var.$default-color-text-accent-h), var(--color-text-accent-s, var.$default-color-text-accent-s), var(--color-text-accent-l, var.$default-color-text-accent-l));
  box-shadow: inset 0 0 3px hsla(var(--color-accent-primary-h, var.$default-color-accent-primary-h), var(--color-accent-primary-s, var.$default-color-accent-primary-s), var(--color-accent-primary-l, var.$default-color-accent-primary-l), 0.1);
}

// Preformatted text (code blocks)
pre {
  background-color: hsla(var(--color-bg-tertiary-h, var.$default-color-bg-tertiary-h), var(--color-bg-tertiary-s, var.$default-color-bg-tertiary-s), var(--color-bg-tertiary-l, var.$default-color-bg-tertiary-l), 0.7); // More opaque for readability
  border: 1px solid hsla(var(--color-border-primary-h, var.$default-color-border-primary-h), var(--color-border-primary-s, var.$default-color-border-primary-s), var(--color-border-primary-l, var.$default-color-border-primary-l), 0.3);
  padding: var.$spacing-md;
  border-radius: var.$radius-lg;
  overflow-x: auto;
  line-height: var(--line-height-base, var.$line-height-base-default) * 0.95; // Slightly tighter for code
  box-shadow: var(--shadow-depth-sm, var.$scss-box-shadow-sm); // Add subtle shadow to code blocks
  @include mixins.custom-scrollbar(
    '--color-accent-secondary', // thumb color prefix
    0.3, 0.5, // thumb alphas
    '--color-bg-tertiary', // track color prefix
    0.2, // track alpha
    6px // width
  );

  code {
    color: hsl(var(--color-text-primary-h, var.$default-color-text-primary-h), var(--color-text-primary-s, var.$default-color-text-primary-s), var(--color-text-primary-l, var.$default-color-text-primary-l));
    font-size: 1em; // Ensure code inside pre matches pre's font-size basis
    background-color: transparent;
    padding: 0;
    border: none;
    box-shadow: none;
  }
}

// Lists - improved spacing and marker styling
ul, ol {
  margin-left: 0; // Remove default browser indent
  padding-left: var.$spacing-xl; // Control indent with padding
  margin-bottom: var.$spacing-md;
  color: hsl(var(--color-text-secondary-h, var.$default-color-text-secondary-h), var(--color-text-secondary-s, var.$default-color-text-secondary-s), var(--color-text-secondary-l, var.$default-color-text-secondary-l));
  li {
    margin-bottom: var.$spacing-sm; // More space between list items
    padding-left: 0; // Reset inner padding, rely on list padding
    position: relative; // For ::before or ::marker styling
    &::marker { // Modern way to style list markers
      color: hsl(var(--color-accent-primary-h, var.$default-color-accent-primary-h), var(--color-accent-primary-s, var.$default-color-accent-primary-s), var(--color-accent-primary-l, var.$default-color-accent-primary-l));
      font-weight: 600;
    }
  }
}
ul { list-style-type: disc; } // Default disc, can customize marker
ol { list-style-type: decimal; }


// Blockquotes - more distinct styling
blockquote {
  margin: var.$spacing-lg 0;
  padding: var.$spacing-md var.$spacing-lg;
  border-left: 4px solid hsl(var(--color-accent-secondary-h, var.$default-color-accent-secondary-h), var(--color-accent-secondary-s, var.$default-color-accent-secondary-s), var(--color-accent-secondary-l, var.$default-color-accent-secondary-l));
  background-color: hsla(var(--color-bg-secondary-h, var.$default-color-bg-secondary-h), var(--color-bg-secondary-s, var.$default-color-bg-secondary-s), var(--color-bg-secondary-l, var.$default-color-bg-secondary-l), 0.4);
  border-radius: 0 var.$radius-lg var.$radius-lg 0;
  color: hsl(var(--color-text-secondary-h, var.$default-color-text-secondary-h), var(--color-text-secondary-s, var.$default-color-text-secondary-s), var(--color-text-secondary-l, var.$default-color-text-secondary-l));
  font-style: italic;

  p {
    margin-bottom: var.$spacing-xs;
    color: inherit; // Inherit blockquote color
    &:last-child { margin-bottom: 0; }
  }
  cite {
    display: block;
    margin-top: var.$spacing-sm;
    font-style: normal; // Normal style for cite source
    font-size: var.$font-size-sm;
    font-weight: 500;
    color: hsl(var(--color-text-muted-h, var.$default-color-text-muted-h), var(--color-text-muted-s, var.$default-color-text-muted-s), var(--color-text-muted-l, var.$default-color-text-muted-l));
    &::before { content: "â€” "; }
  }
}

// Horizontal Rule - more refined
hr {
  border: 0;
  height: 2px; // Thicker but softer
  background: linear-gradient(to right,
    transparent 0%,
    hsla(var(--color-border-secondary-h, var.$default-color-border-secondary-h), var(--color-border-secondary-s, var.$default-color-border-secondary-s), var(--color-border-secondary-l, var.$default-color-border-secondary-l), 0.3) 50%,
    transparent 100%
  );
  margin: var.$spacing-xl * 1.5 0; // More vertical spacing
}

// Helper class for larger, more readable text sections
.text-prose-enhanced {
  font-size: calc(var(--font-size-base, #{$font-size-base-default}) * 1.05); // Slightly larger
  letter-spacing: 0.02em;
  line-height: calc(var(--line-height-base, #{$line-height-base-default}) * 1.05); // Slightly more line height
  p {
    max-width: 70ch;
  }
}

// Helper class for lead paragraphs or important introductory text
.lead-text {
  font-size: var.$font-size-lg;
  color: hsl(var(--color-text-primary-h, var.$default-color-text-primary-h), var(--color-text-primary-s, var.$default-color-text-primary-s), var(--color-text-primary-l, var.$default-color-text-primary-l));
  font-weight: 400; // Normal weight for lead text unless display font handles it
  letter-spacing: 0.01em;
  line-height: 1.7;
  margin-bottom: var.$spacing-lg;
}