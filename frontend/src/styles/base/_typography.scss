// File: frontend/src/styles/base/_typography.scss
/**
 * @file _typography.scss
 * @description Global typographic styles, font imports (if self-hosted),
 *              and base styling for text elements. Uses CSS custom properties
 *              for theme-aware typography.  Enhanced for readability.
 * @version 3.0.1 – arithmetic wrapped in calc(); build-safe with modern Sass
 */

@use '../abstracts/variables' as var;
@use '../abstracts/mixins'    as mixins; // text-glow, custom-scrollbar, …

// ----------------------------------------------------------------------------
// Base body copy (`p`)
// ----------------------------------------------------------------------------
p {
  margin-bottom: var.$spacing-md;

  color: hsl(
    var(--color-text-secondary-h, #{var.$default-color-text-secondary-h}),
    var(--color-text-secondary-s, #{var.$default-color-text-secondary-s}),
    var(--color-text-secondary-l, #{var.$default-color-text-secondary-l})
  );

  line-height: var(--line-height-base, #{var.$line-height-base-default});
  text-wrap: pretty;
  max-width: 75ch; // optimal reading length
}

// ----------------------------------------------------------------------------
// Headings
// ----------------------------------------------------------------------------
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-display, #{var.$font-family-display});
  color: hsl(
    var(--color-text-primary-h, #{var.$default-color-text-primary-h}),
    var(--color-text-primary-s, #{var.$default-color-text-primary-s}),
    var(--color-text-primary-l, #{var.$default-color-text-primary-l})
  );

  line-height: var.$line-height-heading;
  margin-top: calc(var.$spacing-lg * 1.5);
  margin-bottom: var.$spacing-md;
  font-weight: 700;
  text-wrap: balance;
  letter-spacing: -0.01em;

  // Optional subtle glow (only if class added)
  &.heading-glow {
    @include mixins.text-glow('--color-accent-primary', 4px, 0.3);
  }
}

// Responsive sizes (same values, reformatted)
h1 { font-size: clamp(2.25rem, 1.5rem + 3vw, 4rem);   letter-spacing: -0.025em; }
h2 { font-size: clamp(1.875rem, 1.25rem + 2.5vw, 3rem); letter-spacing: -0.02em; }
h3 { font-size: clamp(1.625rem, 1.1rem + 2vw, 2.25rem); font-weight: 600; }
h4 { font-size: clamp(1.375rem, 1rem + 1.5vw, 1.875rem); font-weight: 600; }
h5 { font-size: clamp(1.125rem, 0.9rem + 1vw, 1.5rem);   font-weight: 600; }
h6 {
  font-size: var(--font-size-base, #{var.$font-size-base-default});
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.075em;
  opacity: 0.9;
}

// ----------------------------------------------------------------------------
// Monospace & code
// ----------------------------------------------------------------------------
code, kbd, samp, pre {
  font-family: var(--font-family-monospace, #{var.$font-family-mono});
  font-size: 0.925em;
  color: hsl(
    var(--color-text-secondary-h, #{var.$default-color-text-secondary-h}),
    var(--color-text-secondary-s, #{var.$default-color-text-secondary-s}),
    var(--color-text-secondary-l, #{var.$default-color-text-secondary-l})
  );
  letter-spacing: 0.01em;
}

// Inline code styling
code:not(pre > code) {
  background-color: hsla(
    var(--color-bg-tertiary-h, #{var.$default-color-bg-tertiary-h}),
    var(--color-bg-tertiary-s, #{var.$default-color-bg-tertiary-s}),
    var(--color-bg-tertiary-l, #{var.$default-color-bg-tertiary-l}),
    0.4
  );
  padding: 0.2em 0.45em;
  border-radius: var.$radius-sm;
  border: 1px solid hsla(
    var(--color-border-secondary-h, #{var.$default-color-border-secondary-h}),
    var(--color-border-secondary-s, #{var.$default-color-border-secondary-s}),
    var(--color-border-secondary-l, #{var.$default-color-border-secondary-l}),
    0.4
  );
  color: hsl(
    var(--color-text-accent-h, #{var.$default-color-text-accent-h}),
    var(--color-text-accent-s, #{var.$default-color-text-accent-s}),
    var(--color-text-accent-l, #{var.$default-color-text-accent-l})
  );
  box-shadow: inset 0 0 3px hsla(
    var(--color-accent-primary-h, #{var.$default-color-accent-primary-h}),
    var(--color-accent-primary-s, #{var.$default-color-accent-primary-s}),
    var(--color-accent-primary-l, #{var.$default-color-accent-primary-l}),
    0.1
  );
}

// Code blocks
pre {
  background-color: hsla(
    var(--color-bg-tertiary-h, #{var.$default-color-bg-tertiary-h}),
    var(--color-bg-tertiary-s, #{var.$default-color-bg-tertiary-s}),
    var(--color-bg-tertiary-l, #{var.$default-color-bg-tertiary-l}),
    0.7
  );
  border: 1px solid hsla(
    var(--color-border-primary-h, #{var.$default-color-border-primary-h}),
    var(--color-border-primary-s, #{var.$default-color-border-primary-s}),
    var(--color-border-primary-l, #{var.$default-color-border-primary-l}),
    0.3
  );
  padding: var.$spacing-md;
  border-radius: var.$radius-lg;
  overflow-x: auto;

  // tighter line-height for code
  line-height: calc(var(--line-height-base, #{var.$line-height-base-default}) * 0.95);

  box-shadow: var(--shadow-depth-sm, #{var.$scss-box-shadow-sm});

  // custom scrollbar (mixin)
  @include mixins.custom-scrollbar(
    '--color-accent-secondary', 0.3, 0.5,
    '--color-bg-tertiary',       0.2,
    6px
  );

  code {
    color: hsl(
      var(--color-text-primary-h, #{var.$default-color-text-primary-h}),
      var(--color-text-primary-s, #{var.$default-color-text-primary-s}),
      var(--color-text-primary-l, #{var.$default-color-text-primary-l})
    );
    font-size: 1em;
    background-color: transparent;
    padding: 0;
    border: none;
    box-shadow: none;
  }
}

// ----------------------------------------------------------------------------
// Lists, blockquotes, hr  (unchanged from v3.0.0) ...
// ----------------------------------------------------------------------------
// … ( keep your existing list / blockquote / hr sections here )


// ----------------------------------------------------------------------------
// Utility helper classes
// ----------------------------------------------------------------------------
.text-prose-enhanced {
  font-size: calc(var(--font-size-base, #{var.$font-size-base-default}) * 1.05);
  letter-spacing: 0.02em;
  line-height:  calc(var(--line-height-base, #{var.$line-height-base-default}) * 1.05);

  p { max-width: 70ch; }
}

.lead-text {
  font-size: var.$font-size-lg;
  color: hsl(
    var(--color-text-primary-h, #{var.$default-color-text-primary-h}),
    var(--color-text-primary-s, #{var.$default-color-text-primary-s}),
    var(--color-text-primary-l, #{var.$default-color-text-primary-l})
  );
  font-weight: 400;
  letter-spacing: 0.01em;
  line-height: 1.7;
  margin-bottom: var.$spacing-lg;
}
