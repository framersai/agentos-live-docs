// File: frontend/src/styles/animations/_keyframes.scss
/**
 * @file _keyframes.scss
 * @description Defines custom @keyframes for animations used throughout the "Ephemeral Harmony" design system.
 * Includes effects for core UI elements, transitions, voice interaction visualizations,
 * ambient backgrounds, and specific component states (e.g., logo animations, input focus, loading indicators).
 * Animations aim for an organic, futuristic, and theme-aware feel, prioritizing performance.
 *
 * @role Provides a central repository of reusable CSS keyframe animations.
 * @dependencies `../abstracts/variables` (for SCSS fallback durations, easing functions, and colors if absolutely necessary,
 * though primary theming is via CSS custom properties set by the theme engine).
 * @assumptions CSS custom properties for colors (e.g., --color-accent-primary-h, --voice-pulse-opacity)
 * and animation parameters (e.g. --opacity-start, --scale-pulse) are set by the theme engine or consuming components.
 * @version 2.2.2 - Ensured all HSL(A) components for colors are correctly referenced via CSS variables.
 */

@use '../abstracts/variables' as var; // For SCSS fallback durations and easing

// -----------------------------------------------------------------------------
// Core UI Animations (Fade, Slide)
// -----------------------------------------------------------------------------
@keyframes fadeIn {
  from { opacity: var(--animation-fade-in-opacity-from, 0); }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: var(--animation-fade-out-opacity-from, 1); }
  to { opacity: 0; }
}

@keyframes slideInUp {
  from { opacity: 0; transform: translateY(var(--animation-slide-in-translate-y, 20px)); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideInDown {
  from { opacity: 0; transform: translateY(var(--animation-slide-in-translate-y, -20px)); }
  to { opacity: 1; transform: translateY(0); }
}

// -----------------------------------------------------------------------------
// Pulsing & Glowing Animations (Organic & Feedback)
// -----------------------------------------------------------------------------
@keyframes subtlePulse {
  0%, 100% {
    transform: scale(1);
    opacity: var(--animation-subtle-pulse-opacity-start, 0.85);
  }
  50% {
    transform: scale(var(--animation-subtle-pulse-scale, 1.025));
    opacity: var(--animation-subtle-pulse-opacity-peak, 1);
  }
}

@keyframes inputFocusGlowPulse {
  0%, 100% {
    box-shadow:
      inset 0 1px 2px hsla(var(--shadow-color-h, var.$default-shadow-color-h), var(--shadow-color-s, var.$default-shadow-color-s), var(--shadow-color-l, var.$default-shadow-color-l), 0.08),
      0 0 6px 0px hsla(var(--color-accent-interactive-h, var.$default-color-accent-interactive-h), var(--color-accent-interactive-s, var.$default-color-accent-interactive-s), var(--color-accent-interactive-l, var.$default-color-accent-interactive-l), 0.25);
  }
  50% {
    box-shadow:
      inset 0 1px 3px hsla(var(--shadow-color-h, var.$default-shadow-color-h), var(--shadow-color-s, var.$default-shadow-color-s), var(--shadow-color-l, var.$default-shadow-color-l), 0.12),
      0 0 10px 3px hsla(var(--color-accent-interactive-h, var.$default-color-accent-interactive-h), var(--color-accent-interactive-s, var.$default-color-accent-interactive-s), var(--color-accent-interactive-l, var.$default-color-accent-interactive-l), 0.4);
  }
}

@keyframes subtleTextGlow {
  0%, 100% {
    text-shadow: 0 0 var(--animation-text-glow-radius-start, 3px) hsla(
      var(--color-accent-glow-h, var.$default-color-accent-glow-h), 
      var(--color-accent-glow-s, var.$default-color-accent-glow-s), 
      var(--color-accent-glow-l, var.$default-color-accent-glow-l),
      calc(var(--color-accent-glow-a, #{var.$default-color-accent-glow-a}) * 0.7)
    );
  }
  50% {
    text-shadow: 0 0 var(--animation-text-glow-radius-end, 7px) hsla(
      var(--color-accent-glow-h, var.$default-color-accent-glow-h), 
      var(--color-accent-glow-s, var.$default-color-accent-glow-s), 
      var(--color-accent-glow-l, var.$default-color-accent-glow-l),
      var(--color-accent-glow-a, #{var.$default-color-accent-glow-a})
    );
  }
}

// -----------------------------------------------------------------------------
// Holographic, Ephemeral & UI Feedback Animations
// -----------------------------------------------------------------------------
@keyframes holoShimmer {
  0% { background-position: 200% center; }
  100% { background-position: -200% center; }
}

@keyframes ephemeralMessageIn {
  from { opacity: 0; transform: translateY(12px) scale(0.97); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes ephemeralVanish {
  from { opacity: var(--animation-ephemeral-vanish-opacity-start, 0.9); transform: scale(1) translateY(0); }
  to { opacity: 0; transform: scale(0.93) translateY(-12px); }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

// -----------------------------------------------------------------------------
// Voice & Interaction Visualization Keyframes
// -----------------------------------------------------------------------------
@keyframes voiceAuraPulse {
  0% { transform: scale(0.75); opacity: 0; }
  50% { opacity: var(--voice-pulse-opacity, #{var.$default-voice-pulse-opacity}); }
  100% { transform: scale(1.5); opacity: 0; }
}

@keyframes micListeningPulse {
  0% {
    box-shadow: 0 0 0 0px hsla(var(--color-voice-user-h, var.$default-color-voice-user-h), var(--color-voice-user-s, var.$default-color-voice-user-s), var(--color-voice-user-l, var.$default-color-voice-user-l), 0.5);
    opacity: 0.8;
  }
  70% {
    box-shadow: 0 0 0 12px hsla(var(--color-voice-user-h, var.$default-color-voice-user-h), var(--color-voice-user-s, var.$default-color-voice-user-s), var(--color-voice-user-l, var.$default-color-voice-user-l), 0);
    opacity: 0;
  }
  100% {
    box-shadow: 0 0 0 0px hsla(var(--color-voice-user-h, var.$default-color-voice-user-h), var(--color-voice-user-s, var.$default-color-voice-user-s), var(--color-voice-user-l, var.$default-color-voice-user-l), 0);
    opacity: 0;
  }
}

@keyframes headerPulse {
  0%, 100% { transform: scaleY(1) translateY(0); opacity: 0.7; }
  50% { transform: scaleY(1.03) translateY(-1.5px); opacity: 1; }
}

// -----------------------------------------------------------------------------
// AnimatedLogo Specific Keyframes
// -----------------------------------------------------------------------------
@keyframes logo-idle-breath {
  0% { transform: scale(1); opacity: var(--logo-idle-opacity-base, 0.9); }
  50% { transform: scale(var(--logo-idle-scale-peak, 1.03)); opacity: var(--logo-idle-opacity-peak, 1); }
  100% { transform: scale(1); opacity: var(--logo-idle-opacity-base, 0.9); }
}
@keyframes logo-listening-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(var(--logo-listening-scale-peak, 1.08)); }
  100% { transform: scale(1); }
}
@keyframes logo-ai-active-pulse {
  0% { transform: scale(1); }
  30% { transform: scale(var(--logo-ai-active-scale-peak1, 1.12)); }
  60% { transform: scale(var(--logo-ai-active-scale-peak2, 1.05)); }
  100% { transform: scale(var(--logo-ai-active-scale-peak3, 1.1)); }
}
@keyframes logo-waveform-thrum {
  0%, 100% { transform: translateY(0) translateX(0) rotate(0); }
  25% { transform: translateY(var(--logo-waveform-thrum-intensity-y, -0.7px)) translateX(var(--logo-waveform-thrum-intensity-x, 0.3px)) rotate(var(--logo-waveform-thrum-rotate, 0.8deg)); }
  75% { transform: translateY(var(--logo-waveform-thrum-intensity-y, 0.7px)) translateX(calc(var(--logo-waveform-thrum-intensity-x, 0.3px) * -1)) rotate(calc(var(--logo-waveform-thrum-rotate, 0.8deg) * -1)); }
}
@keyframes letter-entrance-ephemeral {
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes logo-particle-orbit1 {
  0% { transform: rotate(0deg) translateX(var(--logo-particle1-orbit-radius, 45px)) scale(0.4); opacity: 0; }
  50% { opacity: var(--logo-particle1-opacity, 0.85); transform: rotate(180deg) translateX(calc(var(--logo-particle1-orbit-radius, 45px) + 7px)) scale(1.1); }
  100% { transform: rotate(360deg) translateX(var(--logo-particle1-orbit-radius, 45px)) scale(0.4); opacity: 0; }
}

// -----------------------------------------------------------------------------
// Background & Texture Animations
// -----------------------------------------------------------------------------
@keyframes holoGridScroll {
  0% { background-position: 0 0; }
  100% { background-position: var(--bg-holo-grid-size, 50px) var(--bg-holo-grid-size, 50px); }
}

@keyframes subtle-shimmer-idle {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

// -----------------------------------------------------------------------------
// Loading Spinner & Indicators
// -----------------------------------------------------------------------------
@keyframes spinnerBladeFade {
  0%, 39.9% { opacity: 0; }
  40% { opacity: 1; }
  100% { opacity: 0; }
}

@keyframes bounceDelay {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1.0); }
}

@keyframes subtleHoloGlowPulse {
  0%, 100% {
    box-shadow: var(--shadow-depth-lg, var.$scss-box-shadow-lg), 0 0 10px hsla(var(--color-accent-interactive-h, var.$default-color-accent-interactive-h), var(--color-accent-interactive-s, var.$default-color-accent-interactive-s), var(--color-accent-interactive-l, var.$default-color-accent-interactive-l), 0.15);
    opacity: 0.9;
  }
  50% {
    box-shadow: var(--shadow-depth-xl, var.$scss-box-shadow-xl), 0 0 20px hsla(var(--color-accent-interactive-h, var.$default-color-accent-interactive-h), var(--color-accent-interactive-s, var.$default-color-accent-interactive-s), var(--color-accent-interactive-l, var.$default-color-accent-interactive-l), 0.3);
    opacity: 1;
  }
}

@keyframes breathingEffect {
  0%, 100% {
    transform: scale(1);
    opacity: var(--opacity-idle, 0.85);
  }
  50% {
    transform: scale(var(--scale-breath, 1.03));
    opacity: var(--opacity-breath, 1);
  }
}

// Keyframe for status dot pulse (used in _footer.scss)
@keyframes pulseStatus {
  0%, 100% { box-shadow: 0 0 5px 1px currentColor; opacity: 0.7; }
  50% { box-shadow: 0 0 10px 3px currentColor; opacity: 1; }
}
