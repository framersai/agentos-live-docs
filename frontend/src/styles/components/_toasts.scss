// File: frontend/src/styles/components/_toasts.scss
/**
 * @file _toasts.scss
 * @description Styles for toast notifications. "Ephemeral Harmony" theme.
 * @version 1.0.1 - Updated to use base-button-styles mixin for close button.
 */

@use '../abstracts/variables' as var;
@use '../abstracts/mixins' as mixins; // General mixins
@use './buttons' as buttonsFile; // <-- ADD THIS to access the mixin from _buttons.scss

.toast-notifications-container-ephemeral {
  position: fixed;
  bottom: var.$spacing-lg;
  right: var.$spacing-lg;
  width: clamp(300px, 90vw, 400px);
  z-index: var.$z-index-toast;
  display: flex;
  flex-direction: column;
  gap: var.$spacing-sm;
}

.toast-notification-ephemeral {
  @include mixins.glassmorphic-pane(
    hsla(var(--color-bg-tertiary-h), var(--color-bg-tertiary-s), var(--color-bg-tertiary-l), 0.85),
    hsla(var(--color-border-glass-h), var(--color-border-glass-s), var(--color-border-glass-l), 0.5),
    var(--blur-glass),
    var(--shadow-depth-lg)
  );
  border-radius: var.$radius-lg;
  padding: var.$spacing-md;
  display: flex;
  align-items: flex-start;
  gap: var.$spacing-sm;
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 5px;
    background-color: hsl(var(--color-info-h), var(--color-info-s), var(--color-info-l));
    transition: background-color var.$duration-quick;
  }

  &.toast--success::before { background-color: hsl(var(--color-success-h), var(--color-success-s), var(--color-success-l)); }
  &.toast--error::before { background-color: hsl(var(--color-error-h), var(--color-error-s), var(--color-error-l)); }
  &.toast--warning::before { background-color: hsl(var(--color-warning-h), var(--color-warning-s), var(--color-warning-l)); }

  .toast-icon-wrapper-ephemeral {
    flex-shrink: 0;
    .toast-icon-svg {
      width: 1.5rem;
      height: 1.5rem;
    }
  }
  &.toast--success .toast-icon-svg { color: hsl(var(--color-success-h), var(--color-success-s), var(--color-success-l)); }
  &.toast--error .toast-icon-svg { color: hsl(var(--color-error-h), var(--color-error-s), var(--color-error-l)); }
  &.toast--warning .toast-icon-svg { color: hsl(var(--color-warning-h), var(--color-warning-s), var(--color-warning-l)); }
  &.toast--info .toast-icon-svg { color: hsl(var(--color-info-h), var(--color-info-s), var(--color-info-l)); }

  .toast-content-ephemeral {
    flex-grow: 1;
    min-width: 0;
  }

  .toast-title-ephemeral {
    font-family: var(--font-display, var.$font-family-display);
    font-size: var.$font-size-base;
    font-weight: 600;
    color: hsl(var(--color-text-primary-h), var(--color-text-primary-s), var(--color-text-primary-l));
    margin-bottom: calc(var.$spacing-xs / 2);
  }

  .toast-message-ephemeral {
    font-size: var.$font-size-sm;
    line-height: 1.5;
    color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));
    :deep(p) {
      margin: 0;
    }
  }

  .toast-close-button-ephemeral {
    // CORRECTED: Replace @extend .btn with @include mixin
    @include buttonsFile.base-button-styles;
    // These extends might still work if .btn-icon and .btn-ghost are simple
    // and/or also correctly based on the mixin-powered .btn.
    // If they cause errors, they'd need to become mixins too.
    @extend .btn-icon;
    @extend .btn-ghost;
    position: absolute;
    top: var.$spacing-xs;
    right: var.$spacing-xs;
    padding: calc(var.$spacing-xs * 0.75) !important; // Override btn-icon padding
    color: hsl(var(--color-text-muted-h), var(--color-text-muted-s), var(--color-text-muted-l));

    &:hover {
      color: hsl(var(--color-text-primary-h), var(--color-text-primary-s), var(--color-text-primary-l));
      background-color: hsla(var(--color-bg-tertiary-h), var(--color-bg-tertiary-s), var(--color-bg-tertiary-l), 0.5);
    }
    .toast-close-icon-svg { // Class for the XMarkIcon
      width: 1rem; // 16px
      height: 1rem;
    }
  }
}

// Toast Transitions (ensure names match Vue <TransitionGroup>)
.toast-transition-enter-active,
.toast-transition-leave-active {
  transition: all var.$duration-smooth var.$ease-out-expo;
}
.toast-transition-enter-from,
.toast-transition-leave-to {
  opacity: 0;
  transform: translateX(100%) scale(0.95); // Slide in from right
}
.toast-transition-move { // For re-ordering
  transition: transform var.$duration-smooth var.$ease-out-expo;
}