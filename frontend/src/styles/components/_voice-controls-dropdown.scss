// File: frontend/src/styles/components/_voice-controls-dropdown.scss
/**
 * @file _voice-controls-dropdown.scss
 * @description Styles for the VoiceControlsDropdown component, Ephemeral Harmony theme.
 * @version 1.0.2 - Corrected shadow variable usage in glassmorphic-pane.
 */

@use '../abstracts/variables' as var; // Path from components/ to abstracts/
@use '../abstracts/mixins' as commonMixins; // General project mixins from _mixins.scss
@use './buttons' as buttonsFile; // To access the button mixins from _buttons.scss

.vcd { // Root class for VoiceControlsDropdown
  position: relative;

  &__trigger {
    @include buttonsFile.btn-secondary;
    .icon-sm { width: 1.125rem; height: 1.125rem; }
    .icon-xs { width: 0.875rem; height: 0.875rem; }
    .vcd__trigger-text {
      font-weight: 500;
      font-size: var.$font-size-sm;
      @media (min-width: var.$breakpoint-md) { display: inline; }
      @media (max-width: calc(var.$breakpoint-md - 1px)) { display: none; }
    }
    .vcd__trigger-chevron {
      transition: transform var.$duration-quick;
      &.rotated { transform: rotate(180deg); }
    }
  }

  &__menu {
    @include commonMixins.glassmorphic-pane(
      var(--color-bg-glass-dropdown, hsla(var(--color-bg-tertiary-h, var.$default-color-bg-tertiary-h), var(--color-bg-tertiary-s, var.$default-color-bg-tertiary-s), var(--color-bg-tertiary-l, var.$default-color-bg-tertiary-l), 0.9)),
      var(--color-border-glass-dropdown, hsla(var(--color-accent-primary-h, var.$default-accent-primary-h), var(--color-accent-primary-s, var.$default-accent-primary-s), var(--color-accent-primary-l, var.$default-accent-primary-l), 0.3)),
      var(--blur-glass-dropdown, #{var.$blur-glass}),
      // CORRECTED: Use the new full SCSS box-shadow definition variable as the fallback.
      // The CSS custom property --shadow-depth-dropdown should also be a full box-shadow string.
      var(--shadow-depth-dropdown, #{var.$scss-box-shadow-lg})
    );
    border-radius: var.$radius-xl;
    position: absolute;
    top: calc(100% + #{var.$spacing-xs});
    right: 0;
    z-index: var.$z-index-dropdown;
    width: 18rem;
    overflow: hidden;

    @media (min-width: var.$breakpoint-sm) { width: 20rem; }
    @media (min-width: var.$breakpoint-md) { width: 22rem; }

    &.dropdown-float-enter-active,
    &.dropdown-float-leave-active {
      transition: opacity 0.2s var.$ease-out-cubic, transform 0.2s var.$ease-out-cubic;
    }
    &.dropdown-float-enter-from,
    &.dropdown-float-leave-to {
      opacity: 0;
      transform: translateY(-12px) scale(0.95);
    }
  }

  &__header {
    padding: var.$spacing-sm var.$spacing-md;
    border-bottom: 1px solid hsla(var(--color-border-primary-h), var(--color-border-primary-s), var(--color-border-primary-l), 0.15);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  &__title {
    font-size: var.$font-size-base;
    font-weight: 600;
    color: hsl(var(--color-text-primary-h), var(--color-text-primary-s), var(--color-text-primary-l));
  }

  &__settings-btn {
    @include buttonsFile.btn-ghost;
    @include buttonsFile.btn-icon-modifier;
    padding: calc(var.$spacing-xs / 2) !important;
    border-radius: var.$radius-md;
    &:hover {
      background-color: hsla(var(--color-bg-tertiary-h), var(--color-bg-tertiary-s), var(--color-bg-tertiary-l), 0.4);
    }
    .icon-sm {
      width: 1.25rem; height: 1.25rem;
      color: hsl(var(--color-text-muted-h), var(--color-text-muted-s), var(--color-text-muted-l));
    }
  }

  &__content {
    padding: var.$spacing-lg;
    > *:not(:last-child) {
      margin-bottom: calc(var.$spacing-unit * 5);
    }
  }

  &__label {
    font-size: var.$font-size-sm;
    font-weight: 500;
    color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));
    cursor: pointer;
  }

  &__label-sm {
    display: block;
    font-size: var.$font-size-xs;
    font-weight: 500;
    color: hsl(var(--color-text-muted-h), var(--color-text-muted-s), var(--color-text-muted-l));
    margin-bottom: var.$spacing-xs;
    .vcd__label-value {
        font-weight: 600;
        color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l));
        &.truncate { /* styles for truncate if needed */ }
    }
  }
  
  &__provider-tabs {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: calc(var.$spacing-xs * 2.5);
  }

  &__provider-tab {
    @include buttonsFile.btn;
    padding: calc(var.$spacing-xs * 1.5) var.$spacing-sm !important;
    font-size: var.$font-size-xs !important;
    font-weight: 600 !important;
    border-radius: var.$radius-md !important;
    border-width: 1px;
    transition: background-color var.$duration-quick, color var.$duration-quick, border-color var.$duration-quick, box-shadow var.$duration-quick;
    flex: 1;
    text-align: center;
    box-shadow: var(--shadow-depth-xs, 0 1px 2px 0 rgba(0,0,0,0.03));
    border-color: hsl(var(--color-border-primary-h), var(--color-border-primary-s), var(--color-border-primary-l));
    color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));
    background-color: hsl(var(--color-bg-primary-h), var(--color-bg-primary-s), var(--color-bg-primary-l));
    &:hover {
      background-color: hsl(var(--color-bg-secondary-h), var(--color-bg-secondary-s), var(--color-bg-secondary-l));
      box-shadow: var(--shadow-depth-sm, 0 2px 4px 0 rgba(0,0,0,0.05));
      filter: none;
    }
    &:focus-visible { /* see previous for example */ }
    &.active {
      background-color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l));
      color: hsl(var(--color-text-on-primary-h), var(--color-text-on-primary-s), var(--color-text-on-primary-l));
      border-color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l));
      box-shadow: var(--shadow-depth-md);
      &:hover {
         background-color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), calc(var(--color-accent-primary-l) - 5%));
      }
    }
  }

  &__range-slider-group {
     > *:not(:last-child) {
        margin-bottom: var.$spacing-sm;
     }
  }


  &__range-slider {
    // Styles from .range-slider-compact PostCSS
    width: 100%;
    height: 0.5rem; // h-2
    background-color: hsl(var(--color-bg-tertiary-h), var(--color-bg-tertiary-s), var(--color-bg-tertiary-l)); // bg-gray-200 dark:bg-gray-600
    border-radius: var.$radius-full; // rounded-lg
    appearance: none;
    cursor: pointer;
    transition: opacity var.$duration-quick;
    --slider-progress: 0%; /* Will be updated by JS */
    
    background-image: linear-gradient(to right, hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l)) var(--slider-progress), transparent var(--slider-progress));
    // .dark & { background-image: linear-gradient(to right, hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), calc(var(--color-accent-primary-l) - 10%)) var(--slider-progress), transparent var(--slider-progress)); }


    &:hover { opacity: 0.9; }

    &::-webkit-slider-thumb {
      appearance: none;
      width: 1rem; // w-4
      height: 1rem; // h-4
      background-color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), calc(var(--color-accent-primary-l) + 5%));
      // .dark & { background-color: ... }
      border-radius: var.$radius-full;
      cursor: pointer;
      box-shadow: var(--shadow-depth-sm);
      border: 2px solid hsl(var(--color-bg-primary-h), var(--color-bg-primary-s), var(--color-bg-primary-l));
      // .dark & { border-color: ... }
    }
    &::-moz-range-thumb {
      width: 1rem;
      height: 1rem;
      background-color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), calc(var(--color-accent-primary-l) + 5%));
      border-radius: var.$radius-full;
      cursor: pointer;
      border: 0;
      box-shadow: var(--shadow-depth-sm);
    }
  }

  &__footer {
    padding: calc(var.$spacing-xs * 2.5) var.$spacing-sm; // px-3 py-2.5
    border-top: 1px solid hsla(var(--color-border-primary-h), var(--color-border-primary-s), var(--color-border-primary-l), 0.2);
    // .dark & { border-color: ... }
  }

  &__footer-btn-all-settings {
    @include buttonsFile.btn-ghost;
    @include buttonsFile.btn-sm-modifier;
    width: 100%;
    justify-content: center !important; // Ensure text is centered if icon present
    font-size: var.$font-size-sm !important; // text-sm

    .icon-sm { // For Cog6ToothIcon
      width: 1.125rem; height: 1.125rem; // icon-sm from PostCSS
      margin-right: calc(var.$spacing-unit * 1.5); // mr-1.5
    }
  }
}