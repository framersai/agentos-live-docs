// File: frontend/src/styles/views/_public-home.scss
/**
 * @file _public-home.scss
 * @description Styles specific to the PublicHome view.
 * Focuses on responsive layout for agent selection, placeholders, thematic background,
 * and ensuring a compact experience on small screens / full-screen mode.
 * @version 1.1.0 - Implemented responsive margins, padding, and thematic background.
 */

@use '../abstracts/variables' as var;
@use '../abstracts/mixins' as mixins;
@use '../components/buttons' as buttonsFile;
@use '../components/cards' as cardsFile;

.public-home-view-ephemeral {
  display: flex;
  flex-direction: column;
  height: 100%; // Occupy full height of its container (e.g., router-view area)
  width: 100%;
  background-color: hsl(var(--color-bg-primary-h), var(--color-bg-primary-s), var(--color-bg-primary-l));
  // UnifiedChatLayout handles its own internal scrolling and full-height nature.
}

// Agent Selector Area adjustments for responsiveness
.public-agent-selector-area-ephemeral {
  padding: var.$spacing-sm var.$spacing-xs; // Compact for mobile
  margin-bottom: var.$spacing-sm;         // Reduced bottom margin for mobile
  // position: sticky; top: 0; z-index already good.
  // background & backdrop-filter already good.

  @media (min-width: var.$breakpoint-sm) {
    padding: var.$spacing-md var.$spacing-lg;
    margin-bottom: var.$spacing-lg;
  }

  .selector-title-ephemeral {
    font-size: var.$font-size-xs;
    color: hsl(var(--color-text-muted-h), var(--color-text-muted-s), var(--color-text-muted-l));
    font-weight: 500;
    margin-bottom: calc(#{var.$spacing-xs} / 2); // Add a bit of space below title on mobile

    @media (min-width: var.$breakpoint-sm) {
      font-size: var.$font-size-sm;
      margin-bottom: 0; // Remove extra space if layout changes
    }
  }
}

.agent-selector-button-ephemeral {
  // Inherits from button mixins, neomorphism
  padding: var.$spacing-sm var.$spacing-md !important; // Default padding
  font-size: var.$font-size-sm;                        // Default font size
  width: 100%;                                        // Full width on mobile for easier interaction
  max-width: 380px;                                   // Max width on mobile, allowing centering if parent is flex center
  margin-left: auto;
  margin-right: auto;

  @media (min-width: var.$breakpoint-sm) {
    font-size: var.$font-size-base-default;
    width: auto; // Auto width on larger screens
    min-width: 280px;
    max-width: 450px; // Max width on larger screens
  }

  .selected-agent-icon {
    width: 1.2em; height: 1.2em; // Slightly smaller for mobile
    @media (min-width: var.$breakpoint-sm) {
      width: 1.4em; height: 1.4em;
    }
  }
}

.agent-selector-dropdown-panel-ephemeral {
  // Width will be constrained by its button parent or can be set explicitly.
  // Current SCSS already has width logic which seems fine.
  // Ensure max-height is viewport-aware for small screens.
  max-height: min(60vh, 400px); // Prevent excessively tall dropdowns

  .dropdown-content-holographic {
    // Ensure max-height considers header of dropdown for scroll calc.
    max-height: min(calc(60vh - 60px), 340px); // Adjust 60px based on actual header height inside dropdown
  }
}

// Placeholders (Rate Limit, Welcome, No Agents)
.public-welcome-placeholder-ephemeral,
.rate-limit-banner-ephemeral {
  // These are displayed within the .unified-main-content-area of UnifiedChatLayout.
  // That area has its own padding. These placeholders can add internal padding and manage their width.
  margin-top: var.$spacing-lg; // Add some top margin from the header/ephemeral log
  margin-bottom: var.$spacing-lg;
  margin-left: auto;
  margin-right: auto;
  padding: var.$spacing-md;    // Internal padding for the card content (mobile)
  width: 100%;                 // Take available width within parent's padding
  max-width: calc(100% - #{var.$spacing-xs}); // Ensure it doesn't hit edges of parent padding

  @media (min-width: var.$breakpoint-sm) {
    padding: var.$spacing-lg;
    max-width: 600px; // Centered content block
  }
  @media (min-width: var.$breakpoint-md) {
    padding: calc(#{var.$spacing-xl} * 1.25);
    max-width: 700px;
  }
  @media (min-width: var.$breakpoint-lg) {
    padding: calc(#{var.$spacing-xl} * 1.5);
    max-width: 760px; // Comfortable reading width for these messages
  }

  // Text color usage already seems fine (using theme variables)
  .welcome-title-ephemeral, .banner-title-ephemeral {
    color: hsl(var(--color-text-primary-h), var(--color-text-primary-s), var(--color-text-primary-l));
    // font-size clamp is good.
  }
  .welcome-subtitle-ephemeral, .banner-text-ephemeral {
    color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));
    opacity: 0.95; // Ensure high opacity for readability
    .link-ephemeral {
      color: hsl(var(--color-accent-interactive-h), var(--color-accent-interactive-s), var(--color-accent-interactive-l));
      font-weight: 600; // Bolder links
    }
  }
}

// Loading placeholder within main content (if not using specific placeholders above)
.loading-placeholder-ephemeral {
  // ... (existing styles for centering are likely fine) ...
  // Ensure it's visually appealing and uses theme colors if it has text/icons.
  .loading-text-ephemeral {
    color: hsl(var(--color-text-secondary-h), var(--color-text-secondary-s), var(--color-text-secondary-l));
  }
  .loading-spinner-ephemeral { // Assuming this spinner uses text color or a theme variable
    color: hsl(var(--color-accent-primary-h), var(--color-accent-primary-s), var(--color-accent-primary-l));
  }
}

// General content renderer adjustments if used directly in PublicHome structure
// (though mostly handled by MainContentView -> prose)
.content-renderer-ephemeral {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: 0; // Rely on parent padding from .unified-main-content-area
  padding-right: 0;

  @media (min-width: var.$breakpoint-md) {
    // If .prose-ephemeral is used, it has its own max-width: 80ch.
    // If another direct content block is here, it might need max-width.
    // For now, assuming specialized components or .prose handle their width.
  }
}