<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Structured Output Manager - AgentOS Documentation</title>
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/highlight.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --color-background-primary: #ffffff;
    --color-background-secondary: #f8fafc;
    --color-background-elevated: #f1f5f9;
    --color-text-primary: #0f172a;
    --color-text-secondary: #475569;
    --color-text-muted: #94a3b8;
    --color-accent-primary: #6366f1;
    --color-accent-hover: #4f46e5;
    --color-border-subtle: #e2e8f0;
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-background-primary: #020617;
      --color-background-secondary: #0f172a;
      --color-background-elevated: #1e293b;
      --color-text-primary: #f8fafc;
      --color-text-secondary: #cbd5e1;
      --color-text-muted: #64748b;
      --color-accent-primary: #818cf8;
      --color-accent-hover: #a5b4fc;
      --color-border-subtle: #1e293b;
    }
  }
  body {
    font-family: 'Inter', system-ui, -apple-system, sans-serif !important;
    background: var(--color-background-primary) !important;
    color: var(--color-text-primary) !important;
  }
  .agentos-header {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--color-border-subtle);
    padding: 0.75rem 1.5rem;
  }
  @media (prefers-color-scheme: dark) {
    .agentos-header { background: rgba(2, 6, 23, 0.95); }
  }
  .agentos-header-inner {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .agentos-logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-decoration: none;
    font-weight: 700;
    font-size: 1.25rem;
    color: var(--color-text-primary);
  }
  .agentos-logo svg { width: 32px; height: 32px; }
  .agentos-nav {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }
  .agentos-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-weight: 500;
    font-size: 0.875rem;
    transition: color 0.15s ease;
  }
  .agentos-nav a:hover { color: var(--color-accent-primary); }
  .agentos-nav a.active { color: var(--color-accent-primary); font-weight: 600; }
  .agentos-cta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    color: white !important;
    border-radius: 0.5rem;
    font-weight: 600;
    font-size: 0.875rem;
    transition: all 0.15s ease;
  }
  .agentos-cta:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
  }
  .github-icon { display: flex; align-items: center; }
  .agentos-footer {
    border-top: 1px solid var(--color-border-subtle);
    background: var(--color-background-secondary);
    padding: 3rem 1.5rem;
    margin-top: 4rem;
  }
  .agentos-footer-inner { max-width: 1400px; margin: 0 auto; }
  .agentos-footer-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
  }
  .agentos-footer h4 { font-weight: 700; margin-bottom: 1rem; color: var(--color-text-primary); }
  .agentos-footer ul { list-style: none; padding: 0; margin: 0; }
  .agentos-footer li { margin-bottom: 0.5rem; }
  .agentos-footer a { color: var(--color-text-secondary); text-decoration: none; font-size: 0.875rem; }
  .agentos-footer a:hover { color: var(--color-accent-primary); }
  /* TypeDoc Overrides */
  .tsd-page-toolbar { background: var(--color-background-secondary) !important; border-bottom: 1px solid var(--color-border-subtle) !important; }
  .tsd-page-title { background: var(--color-background-primary) !important; }
  .col-content { background: var(--color-background-primary) !important; }
  .col-sidebar { background: var(--color-background-secondary) !important; border-right: 1px solid var(--color-border-subtle) !important; }
  .tsd-navigation { background: var(--color-background-secondary) !important; }
  .tsd-kind-icon { color: var(--color-accent-primary) !important; }
  a { color: var(--color-accent-primary); }
  code { 
    background: var(--color-background-elevated) !important; 
    color: var(--color-text-primary) !important;
    padding: 0.125rem 0.375rem; 
    border-radius: 0.25rem; 
    font-size: 0.875em; 
  }
  pre { 
    background: var(--color-background-elevated) !important; 
    color: var(--color-text-primary) !important;
    border: 1px solid var(--color-border-subtle); 
    border-radius: 0.5rem; 
    padding: 1rem !important; 
  }
  pre code {
    background: transparent !important;
    color: inherit !important;
  }
  h1, h2, h3, h4, h5 { color: var(--color-text-primary) !important; }
  p, li { color: var(--color-text-secondary) !important; }
  @media (max-width: 768px) { .agentos-nav-links { display: none; } }
</style>

  <style>
    .md-content {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem 1.5rem 4rem;
    }
    .md-content h1 { font-size: 2.25rem; font-weight: 800; margin-bottom: 1.5rem; border-bottom: 2px solid var(--color-border-subtle); padding-bottom: 0.75rem; }
    .md-content h2 { font-size: 1.5rem; font-weight: 700; margin-top: 2.5rem; margin-bottom: 1rem; }
    .md-content h3 { font-size: 1.25rem; font-weight: 600; margin-top: 2rem; margin-bottom: 0.75rem; }
    .md-content p { line-height: 1.7; margin-bottom: 1rem; }
    .md-content ul, .md-content ol { margin-bottom: 1rem; padding-left: 1.5rem; }
    .md-content li { margin-bottom: 0.5rem; line-height: 1.6; }
    .md-content pre { overflow-x: auto; margin: 1.5rem 0; }
    .md-content code { font-family: 'SF Mono', 'Consolas', monospace; font-size: 0.875em; }
    .md-content blockquote { border-left: 4px solid var(--color-accent-primary); padding-left: 1rem; margin: 1.5rem 0; color: var(--color-text-secondary); }
    .md-content table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
    .md-content th, .md-content td { padding: 0.75rem; border: 1px solid var(--color-border-subtle); text-align: left; }
    .md-content th { background: var(--color-background-secondary); font-weight: 600; }
    .md-content img { max-width: 100%; height: auto; border-radius: 0.5rem; }
    .md-content a { color: var(--color-accent-primary); text-decoration: none; }
    .md-content a:hover { text-decoration: underline; }
    .md-content hr { border: none; border-top: 1px solid var(--color-border-subtle); margin: 2rem 0; }
    /* Mermaid diagram support */
    .mermaid { background: var(--color-background-secondary); padding: 1rem; border-radius: 0.5rem; margin: 1.5rem 0; }
  </style>
</head>
<body>
<header class="agentos-header">
  <div class="agentos-header-inner">
    <a href="https://agentos.sh" class="agentos-logo">
      <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="40" height="40" rx="10" fill="url(#lg)"/>
        <path d="M20 8L28 14V26L20 32L12 26V14L20 8Z" stroke="white" stroke-width="2" fill="none"/>
        <circle cx="20" cy="20" r="4" fill="white"/>
        <defs><linearGradient id="lg" x1="0" y1="0" x2="40" y2="40"><stop offset="0%" stop-color="#6366f1"/><stop offset="100%" stop-color="#8b5cf6"/></linearGradient></defs>
      </svg>
      AgentOS
    </a>
    <nav class="agentos-nav">
      <span class="agentos-nav-links">
        <a href="https://agentos.sh/en/about">About</a>
        <a href="https://agentos.sh/en/#features">Features</a>
        <a href="https://agentos.sh/en/blog">Blog</a>
        <a href="/" class="active">API Docs</a>
        <a href="https://agentos.sh/en/guides">Guides</a>
      </span>
      <a href="https://github.com/framersai/agentos" target="_blank" rel="noopener noreferrer" class="github-icon" title="GitHub">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
      </a>
      <a href="https://agentos.sh" class="agentos-cta">Get Started</a>
    </nav>
  </div>
</header>

<main class="md-content">
<h1>Structured Output Manager</h1>
<h2>Overview</h2>
<p>The Structured Output Manager ensures LLM outputs conform to predefined JSON Schemas, enabling reliable parsing, validation, and type-safe consumption of agent responses.</p>
<h2>Key Features</h2>
<ul>
<li><strong>JSON Schema Validation</strong>: Full JSON Schema draft 2020-12 support</li>
<li><strong>Multiple Strategies</strong>: JSON mode, function calling, prompt engineering</li>
<li><strong>Parallel Function Calls</strong>: Execute multiple tools in a single response</li>
<li><strong>Entity Extraction</strong>: Pull structured data from unstructured text</li>
<li><strong>Automatic Retry</strong>: Retry with feedback on validation failures</li>
<li><strong>Robust Parsing</strong>: Handle malformed JSON from LLMs</li>
</ul>
<h2>Quick Start</h2>
<h3>Basic Structured Generation</h3>
<pre><code class="language-typescript">import { StructuredOutputManager, JSONSchema } from &#39;@framers/agentos/core/structured&#39;;

const manager = new StructuredOutputManager({
  llmProviderManager,
  defaultProviderId: &#39;openai&#39;,
  defaultModelId: &#39;gpt-4o&#39;,
});

// Define your schema
const personSchema: JSONSchema = {
  type: &#39;object&#39;,
  properties: {
    name: { type: &#39;string&#39;, minLength: 1 },
    age: { type: &#39;integer&#39;, minimum: 0, maximum: 150 },
    email: { type: &#39;string&#39;, format: &#39;email&#39; },
    interests: {
      type: &#39;array&#39;,
      items: { type: &#39;string&#39; },
      minItems: 1,
    },
  },
  required: [&#39;name&#39;, &#39;email&#39;],
};

// Generate structured output
const result = await manager.generate({
  prompt: &#39;Extract person info from: John Doe, 30 years old, john@example.com, likes hiking and photography&#39;,
  schema: personSchema,
  schemaName: &#39;Person&#39;,
});

if (result.success) {
  console.log(result.data);
  // { name: &#39;John Doe&#39;, age: 30, email: &#39;john@example.com&#39;, interests: [&#39;hiking&#39;, &#39;photography&#39;] }
}
</code></pre>
<h3>Parallel Function Calling</h3>
<pre><code class="language-typescript">const result = await manager.generateFunctionCalls({
  prompt: &#39;Get weather for New York and current stock price of AAPL&#39;,
  functions: [
    {
      name: &#39;get_weather&#39;,
      description: &#39;Get current weather for a city&#39;,
      parameters: {
        type: &#39;object&#39;,
        properties: {
          city: { type: &#39;string&#39; },
          units: { type: &#39;string&#39;, enum: [&#39;celsius&#39;, &#39;fahrenheit&#39;] },
        },
        required: [&#39;city&#39;],
      },
      handler: async (args) =&gt; await weatherAPI.get(args.city, args.units),
    },
    {
      name: &#39;get_stock_price&#39;,
      description: &#39;Get current stock price&#39;,
      parameters: {
        type: &#39;object&#39;,
        properties: {
          symbol: { type: &#39;string&#39;, pattern: &#39;^[A-Z]{1,5}$&#39; },
        },
        required: [&#39;symbol&#39;],
      },
      handler: async (args) =&gt; await stockAPI.getPrice(args.symbol),
    },
  ],
  maxParallelCalls: 10,
});

// Both functions called in parallel
result.calls.forEach(call =&gt; {
  console.log(`${call.functionName}:`, call.executionResult);
});
</code></pre>
<h3>Entity Extraction</h3>
<pre><code class="language-typescript">const result = await manager.extractEntities({
  text: `
    Meeting attendees:
    - John Smith (john@company.com) - Engineering Lead
    - Sarah Johnson (sarah@company.com) - Product Manager
    - Mike Wilson (mike@company.com) - Designer
  `,
  entitySchema: {
    type: &#39;object&#39;,
    properties: {
      name: { type: &#39;string&#39; },
      email: { type: &#39;string&#39;, format: &#39;email&#39; },
      role: { type: &#39;string&#39; },
    },
    required: [&#39;name&#39;, &#39;email&#39;],
  },
  taskName: &#39;MeetingAttendeeExtraction&#39;,
  extractAll: true,
});

console.log(result.entities);
// [
//   { name: &#39;John Smith&#39;, email: &#39;john@company.com&#39;, role: &#39;Engineering Lead&#39; },
//   { name: &#39;Sarah Johnson&#39;, email: &#39;sarah@company.com&#39;, role: &#39;Product Manager&#39; },
//   { name: &#39;Mike Wilson&#39;, email: &#39;mike@company.com&#39;, role: &#39;Designer&#39; },
// ]
</code></pre>
<h2>Generation Strategies</h2>
<h3>JSON Mode (<code>json_mode</code>)</h3>
<p>Uses the provider&#39;s native JSON mode (OpenAI, OpenRouter, Ollama). Best for simple schemas.</p>
<pre><code class="language-typescript">const result = await manager.generate({
  prompt: &#39;List 3 colors&#39;,
  schema: { type: &#39;array&#39;, items: { type: &#39;string&#39; }, minItems: 3, maxItems: 3 },
  schemaName: &#39;Colors&#39;,
  strategy: &#39;json_mode&#39;,
});
</code></pre>
<h3>Function Calling (<code>function_calling</code>)</h3>
<p>Uses tool/function calling API. Best for complex nested schemas.</p>
<pre><code class="language-typescript">const result = await manager.generate({
  prompt: &#39;Generate a complex report&#39;,
  schema: complexReportSchema,
  schemaName: &#39;Report&#39;,
  strategy: &#39;function_calling&#39;,
});
</code></pre>
<h3>Prompt Engineering (<code>prompt_engineering</code>)</h3>
<p>Instructs in the prompt and parses output. Fallback for providers without native support.</p>
<pre><code class="language-typescript">const result = await manager.generate({
  prompt: &#39;Generate data&#39;,
  schema: mySchema,
  schemaName: &#39;Data&#39;,
  strategy: &#39;prompt_engineering&#39;,
});
</code></pre>
<h3>Auto Selection (<code>auto</code>)</h3>
<p>Automatically selects the best strategy based on provider capabilities and schema complexity.</p>
<pre><code class="language-typescript">const result = await manager.generate({
  prompt: &#39;Generate data&#39;,
  schema: mySchema,
  schemaName: &#39;Data&#39;,
  strategy: &#39;auto&#39;, // Default
});
</code></pre>
<h2>JSON Schema Support</h2>
<h3>Supported Keywords</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Keywords</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Type</strong></td>
<td><code>type</code>, <code>enum</code>, <code>const</code></td>
</tr>
<tr>
<td><strong>String</strong></td>
<td><code>minLength</code>, <code>maxLength</code>, <code>pattern</code>, <code>format</code></td>
</tr>
<tr>
<td><strong>Number</strong></td>
<td><code>minimum</code>, <code>maximum</code>, <code>exclusiveMinimum</code>, <code>exclusiveMaximum</code>, <code>multipleOf</code></td>
</tr>
<tr>
<td><strong>Array</strong></td>
<td><code>items</code>, <code>minItems</code>, <code>maxItems</code>, <code>uniqueItems</code></td>
</tr>
<tr>
<td><strong>Object</strong></td>
<td><code>properties</code>, <code>required</code>, <code>additionalProperties</code>, <code>minProperties</code>, <code>maxProperties</code></td>
</tr>
<tr>
<td><strong>Composition</strong></td>
<td><code>allOf</code>, <code>anyOf</code>, <code>oneOf</code>, <code>not</code></td>
</tr>
<tr>
<td><strong>References</strong></td>
<td><code>$ref</code>, <code>$defs</code></td>
</tr>
</tbody></table>
<h3>Format Validators</h3>
<table>
<thead>
<tr>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>email</code></td>
<td>Email address</td>
</tr>
<tr>
<td><code>uri</code></td>
<td>Full URI</td>
</tr>
<tr>
<td><code>uri-reference</code></td>
<td>URI or relative reference</td>
</tr>
<tr>
<td><code>uuid</code></td>
<td>UUID v4</td>
</tr>
<tr>
<td><code>date-time</code></td>
<td>ISO 8601 datetime</td>
</tr>
<tr>
<td><code>date</code></td>
<td>ISO 8601 date</td>
</tr>
<tr>
<td><code>time</code></td>
<td>ISO 8601 time</td>
</tr>
<tr>
<td><code>hostname</code></td>
<td>DNS hostname</td>
</tr>
<tr>
<td><code>ipv4</code></td>
<td>IPv4 address</td>
</tr>
<tr>
<td><code>ipv6</code></td>
<td>IPv6 address</td>
</tr>
<tr>
<td><code>regex</code></td>
<td>Valid regex pattern</td>
</tr>
</tbody></table>
<h2>Validation</h2>
<h3>Manual Validation</h3>
<pre><code class="language-typescript">const issues = manager.validate(
  { name: &#39;John&#39;, age: -5 },
  personSchema,
  true // strict mode
);

if (issues.length &gt; 0) {
  issues.forEach(issue =&gt; {
    console.log(`${issue.path}: ${issue.message}`);
    // &quot;age: Value must be &gt;= 0&quot;
  });
}
</code></pre>
<h3>Custom Validators</h3>
<pre><code class="language-typescript">const result = await manager.generate({
  prompt: &#39;Generate user data&#39;,
  schema: userSchema,
  schemaName: &#39;User&#39;,
  customValidator: (data) =&gt; {
    const issues = [];
    
    // Business logic validation
    if (data.endDate &lt; data.startDate) {
      issues.push({
        path: &#39;endDate&#39;,
        message: &#39;End date must be after start date&#39;,
        keyword: &#39;custom&#39;,
        severity: &#39;error&#39;,
      });
    }
    
    return issues;
  },
});
</code></pre>
<h2>Retry Logic</h2>
<p>The manager automatically retries on validation failure:</p>
<pre><code class="language-typescript">const result = await manager.generate({
  prompt: &#39;Generate data&#39;,
  schema: strictSchema,
  schemaName: &#39;Data&#39;,
  maxRetries: 5, // Default: 3
});

console.log(`Succeeded after ${result.retryCount} retries`);
</code></pre>
<h2>Schema Registration</h2>
<p>Register schemas for reuse:</p>
<pre><code class="language-typescript">// Register common schemas
manager.registerSchema(&#39;Address&#39;, {
  type: &#39;object&#39;,
  properties: {
    street: { type: &#39;string&#39; },
    city: { type: &#39;string&#39; },
    country: { type: &#39;string&#39; },
    postalCode: { type: &#39;string&#39; },
  },
  required: [&#39;street&#39;, &#39;city&#39;, &#39;country&#39;],
});

// Use in other schemas via $ref
const orderSchema = {
  type: &#39;object&#39;,
  properties: {
    orderId: { type: &#39;string&#39; },
    shippingAddress: { $ref: &#39;#/$defs/Address&#39; },
    billingAddress: { $ref: &#39;#/$defs/Address&#39; },
  },
  required: [&#39;orderId&#39;, &#39;shippingAddress&#39;],
  $defs: {
    Address: manager.getSchema(&#39;Address&#39;),
  },
};
</code></pre>
<h2>Statistics</h2>
<p>Track structured output performance:</p>
<pre><code class="language-typescript">const stats = manager.getStatistics();

console.log(`Success rate: ${(stats.successRate * 100).toFixed(1)}%`);
console.log(`Average retries: ${stats.avgRetries.toFixed(2)}`);
console.log(`Average latency: ${stats.avgLatencyMs.toFixed(0)}ms`);
console.log(`Total tokens: ${stats.totalTokensUsed}`);
console.log(&#39;Top validation errors:&#39;, stats.topValidationErrors);

// Reset if needed
manager.resetStatistics();
</code></pre>
<h2>Error Handling</h2>
<pre><code class="language-typescript">import { StructuredOutputError } from &#39;@framers/agentos/core/structured&#39;;

try {
  const result = await manager.generate({
    prompt: &#39;Generate data&#39;,
    schema: strictSchema,
    schemaName: &#39;Data&#39;,
    maxRetries: 3,
  });
} catch (error) {
  if (error instanceof StructuredOutputError) {
    console.log(&#39;Validation failed after retries:&#39;, error.validationErrors);
    console.log(&#39;Raw output was:&#39;, error.rawOutput);
    console.log(&#39;Strategy used:&#39;, error.strategy);
    console.log(&#39;Retry count:&#39;, error.retryCount);
  }
}
</code></pre>
<h2>Provider Capabilities</h2>
<table>
<thead>
<tr>
<th>Provider</th>
<th>JSON Mode</th>
<th>Function Calling</th>
<th>Parallel Calls</th>
<th>Strict Mode</th>
</tr>
</thead>
<tbody><tr>
<td>OpenAI</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td>Anthropic</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>OpenRouter</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>Ollama</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody></table>
<h2>Best Practices</h2>
<h3>1. Use Descriptive Schemas</h3>
<pre><code class="language-typescript">// ✅ Good: Rich descriptions help the LLM
const schema = {
  type: &#39;object&#39;,
  description: &#39;A product review with sentiment analysis&#39;,
  properties: {
    summary: {
      type: &#39;string&#39;,
      description: &#39;One sentence summary of the review&#39;,
      maxLength: 200,
    },
    sentiment: {
      type: &#39;string&#39;,
      enum: [&#39;positive&#39;, &#39;neutral&#39;, &#39;negative&#39;],
      description: &#39;Overall sentiment of the review&#39;,
    },
    score: {
      type: &#39;integer&#39;,
      minimum: 1,
      maximum: 5,
      description: &#39;Rating from 1 (worst) to 5 (best)&#39;,
    },
  },
};

// ❌ Bad: Minimal schema
const schema = {
  type: &#39;object&#39;,
  properties: {
    summary: { type: &#39;string&#39; },
    sentiment: { type: &#39;string&#39; },
    score: { type: &#39;number&#39; },
  },
};
</code></pre>
<h3>2. Start Simple</h3>
<pre><code class="language-typescript">// Start with simple schemas, add constraints as needed
const v1Schema = {
  type: &#39;object&#39;,
  properties: {
    name: { type: &#39;string&#39; },
    age: { type: &#39;number&#39; },
  },
};

// Later, add constraints based on real-world issues
const v2Schema = {
  type: &#39;object&#39;,
  properties: {
    name: { type: &#39;string&#39;, minLength: 1, maxLength: 100 },
    age: { type: &#39;integer&#39;, minimum: 0, maximum: 150 },
  },
  required: [&#39;name&#39;],
};
</code></pre>
<h3>3. Use Appropriate Retries</h3>
<pre><code class="language-typescript">// Simple extraction: fewer retries needed
const result1 = await manager.generate({
  schema: simpleSchema,
  maxRetries: 2,
});

// Complex generation: may need more retries
const result2 = await manager.generate({
  schema: complexSchema,
  maxRetries: 5,
});
</code></pre>
<h2>Related Documentation</h2>
<ul>
<li><a href="./ARCHITECTURE.html">Architecture</a> - Full system overview</li>
<li><a href="./PLANNING_ENGINE.html">Planning Engine</a> - Multi-step execution</li>
<li><a href="./HUMAN_IN_THE_LOOP.html">Human-in-the-Loop</a> - Human oversight</li>
</ul>

</main>
<footer class="agentos-footer">
  <div class="agentos-footer-inner">
    <div class="agentos-footer-grid">
      <div>
        <h4>AgentOS</h4>
        <p style="color: var(--color-text-secondary); font-size: 0.875rem; line-height: 1.6;">
          The open-source framework for building intelligent AI agent systems. MIT Licensed.
        </p>
      </div>
      <div>
        <h4 style="font-size: 0.875rem;">Resources</h4>
        <ul>
          <li><a href="https://agentos.sh/en/guides">Guides</a></li>
          <li><a href="/">API Reference</a></li>
          <li><a href="https://agentos.sh/en/blog">Blog</a></li>
        </ul>
      </div>
      <div>
        <h4 style="font-size: 0.875rem;">Community</h4>
        <ul>
          <li><a href="https://github.com/framersai/agentos">GitHub</a></li>
          <li><a href="https://discord.gg/agentos">Discord</a></li>
          <li><a href="https://twitter.com/agentos_ai">Twitter</a></li>
        </ul>
      </div>
      <div>
        <h4 style="font-size: 0.875rem;">Legal</h4>
        <ul>
          <li><a href="https://agentos.sh/privacy">Privacy Policy</a></li>
          <li><a href="https://agentos.sh/terms">Terms of Service</a></li>
          <li><a href="https://github.com/framersai/agentos/blob/master/LICENSE">MIT License</a></li>
        </ul>
      </div>
    </div>
    <div style="border-top: 1px solid var(--color-border-subtle); padding-top: 1.5rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
      <p style="color: var(--color-text-muted); font-size: 0.875rem; margin: 0;">© 2025 Frame.dev. All rights reserved.</p>
      <p style="color: var(--color-text-muted); font-size: 0.75rem; margin: 0;">Built with TypeDoc • Powered by AgentOS</p>
    </div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({ startOnLoad: true, theme: window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'default' });
</script>
</body>
</html>