name: Publish @framers/agentos (Monorepo)

# MANUAL RELEASE ONLY - syncs monorepo agentos to standalone repo
# For actual npm publishing, use the standalone repo workflow

on:
  workflow_dispatch:
    inputs:
      sync_only:
        description: 'Sync to standalone repo only (no publish)'
        required: false
        type: boolean
        default: true

jobs:
  sync:
    name: Sync to standalone repo
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
          submodules: true

      - name: Sync agentos submodule
        run: |
          cd packages/agentos
          git fetch origin
          git checkout master
          git pull origin master
          echo "Synced packages/agentos to latest master"

      - name: Show sync status
        run: |
          cd packages/agentos
          echo "=== Latest commits ==="
          git log --oneline -5
          echo ""
          echo "=== Package version ==="
          grep '"version"' package.json
          echo ""
          echo "To release, go to:"
          echo "https://github.com/framersai/agentos/actions/workflows/release.yml"
