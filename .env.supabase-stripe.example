################################################################################
# Voice Chat Assistant Environment Configuration
# Version: 1.4 - Added DISABLE_COST_LIMITS
#
# Instructions:
# 1. This file contains your actual configuration for Voice Chat Assistant
# 2. Fill in the remaining values as required by your setup
# 3. Do NOT commit this file with sensitive credentials to public repos
################################################################################

#-------------------------------------------------------------------------------
# SECTION 1: CORE APPLICATION SETTINGS
#-------------------------------------------------------------------------------

# PORT: The port your backend server will run on.
PORT=3001

# NODE_ENV: Application environment.
NODE_ENV=development

# FRONTEND_URL: The URL of your frontend application.
FRONTEND_URL=http://localhost:3000

ENABLE_SQLITE_MEMORY=false

# Max public requests per IP per day
RATE_LIMIT_PUBLIC_DAILY=100

# APP_URL: The public base URL of your backend application.
APP_URL=http://localhost:3001

# LOG_LEVEL: Controls the verbosity of application logging.
LOG_LEVEL=debug

PASSWORD=yourpassword

# Supabase project (required for registration/login)
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJI...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJI...

GLOBAL_ACCESS_PASSWORD=your-global-access-password

# Optional: disable the legacy global password by commenting out the line above.
# GLOBAL_ACCESS_PASSWORD=

# If omitted, PASSWORD will be used for legacy compatibility.

# AUTH_JWT_SECRET: Secret used for issuing session tokens (preferred over JWT_SECRET).
# Falls back to JWT_SECRET if not provided.
AUTH_JWT_SECRET=voice_chat_assistant_super_secure_jwt_secret_change_in_production_min_64_chars
# AUTH_JWT_EXPIRES_IN: Lifespan for issued auth tokens (e.g. 12h, 7d).
AUTH_JWT_EXPIRES_IN=12h

# Rate limit controls for global passphrase logins
GLOBAL_LOGIN_RATE_WINDOW_MINUTES=10
GLOBAL_LOGIN_RATE_MAX_ATTEMPTS=20

#-------------------------------------------------------------------------------
# SECTION 2: AUTHENTICATION & SECURITY
#-------------------------------------------------------------------------------

# JWT_SECRET: Secret key used to sign and verify JSON Web Tokens for user authentication.
# IMPORTANT: Change this to a strong, random string for production!
JWT_SECRET=voice_chat_assistant_super_secure_jwt_secret_change_in_production_min_64_chars

# JWT_EXPIRES_IN: Duration for which JWTs remain valid (legacy fallback for AUTH_JWT_EXPIRES_IN).
JWT_EXPIRES_IN=7d

# API_KEY_ENCRYPTION_KEY_HEX: 32-byte hex key for AES-256 encryption of user API keys.
# IMPORTANT: Change this to a secure random hex key for production!
# Generate using: openssl rand -hex 32
API_KEY_ENCRYPTION_KEY_HEX=a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456

#-------------------------------------------------------------------------------
# SECTION 3: DATABASE CONFIGURATION
#-------------------------------------------------------------------------------

# For PostgreSQL (Production)
DATABASE_URL=postgresql://vca_user:vca_secure_password_change_in_production@localhost:5432/voice_chat_assistant

# For SQLite (Development fallback)
# DATABASE_URL=file:./dev.db

# Database client type
DB_CLIENT=postgresql
DB_CONNECTION_STRING=postgresql://vca_user:vca_secure_password_change_in_production@localhost:5432/voice_chat_assistant

#-------------------------------------------------------------------------------
# SECTION 4: LLM PROVIDER API KEYS
#-------------------------------------------------------------------------------

#------------------------------------------------------
# SECTION 4: LLM PROVIDER API KEYS
#------------------------------------------------------

OPENAI_API_KEY=
OPENROUTER_API_KEY=
ANTHROPIC_API_KEY=
ANTHROPIC_DEFAULT_MODEL=claude-3-sonnet-20240229

#-------------------------------------------------------------------------------
# SECTION 5: VECTOR STORE CONFIGURATION (RAG SYSTEM)
#-------------------------------------------------------------------------------

# --- PINECONE (Primary Vector Store for Voice Chat Assistant) ---
PINECONE_API_KEY=pcsk_6ta4TK_Rjf4favtTHDmqL2YYtYecXwwgox9o2rGCeP8gQm3w3nGkkdzz5PK21994FLKrCW
PINECONE_ENVIRONMENT=us-east-1
PINECONE_INDEX_NAME=vca
PINECONE_NAMESPACE=voice-chat-assistant

# --- WEAVIATE (Alternative Vector Store) ---
# WEAVIATE_HTTP_SCHEME=http
# WEAVIATE_HTTP_HOST=localhost:8080
# WEAVIATE_API_KEY=
# WEAVIATE_GRPC_ENABLED=false
# WEAVIATE_GRPC_HOST=localhost:50051

# --- QDRANT (Alternative Vector Store) ---
# QDRANT_URL=http://localhost:6333
# QDRANT_API_KEY=

#-------------------------------------------------------------------------------
# SECTION 6: MODEL PREFERENCES & ROUTING
#-------------------------------------------------------------------------------

# Default model preferences for Voice Chat Assistant
MODEL_PREF_GENERAL_CHAT=openai/gpt-4o-mini
MODEL_PREF_CODING=openai/gpt-4o
MODEL_PREF_RAG_SYNTHESIS=openai/gpt-4o-mini
MODEL_PREF_SELF_REFLECTION=openai/gpt-4o-mini
MODEL_PREF_SUMMARIZATION=openai/gpt-4o-mini
MODEL_PREF_DEFAULT_EMBEDDING=openai/text-embedding-3-small
# For complex interview explanations
MODEL_PREF_INTERVIEW_TUTOR=openai/gpt-4o

# Model routing configuration
# Default to openrouter
ROUTING_LLM_PROVIDER_ID=openrouter
# Default model for openrouter
ROUTING_LLM_MODEL_ID=openai/gpt-4o-mini

# Fallback provider if ROUTING_LLM_PROVIDER_ID fails or is not preferred
FALLBACK_LLM_PROVIDER_ID=openai

#-------------------------------------------------------------------------------
# SECTION 7: COST MANAGEMENT & RATE LIMITING
#-------------------------------------------------------------------------------

# Cost thresholds and limits
# General threshold, purpose might need clarification if used elsewhere
COST_THRESHOLD=20.00
COST_THRESHOLD_USD_PER_SESSION=2.00
GLOBAL_COST_THRESHOLD_USD_PER_MONTH=100.00
PUBLIC_ACCESS_GMI_INTERACTIONS_PER_HOUR=20

# Disable all cost-based limitations if true
# Set to true to disable cost/rate limits for development
DISABLE_COST_LIMITS=true

#-------------------------------------------------------------------------------
# SECTION 8: VOICE CHAT ASSISTANT SPECIFIC SETTINGS
#-------------------------------------------------------------------------------

# Default persona and language settings
DEFAULT_PERSONA_ID=voice_assistant_persona
DEFAULT_GMI_LANGUAGE=en-US
# Max tokens for LLM prompt construction
DEFAULT_MAX_PROMPT_TOKENS=8000
# Default number of conversational history messages (user+assistant pairs)
DEFAULT_MAX_HISTORY_MESSAGES=10
# Max configurable history messages
MAX_CONVERSATIONAL_HISTORY_MESSAGES=100

# Language Detection & Response Settings
# Mode for determining response language: auto, fixed, or follow-stt
DEFAULT_RESPONSE_LANGUAGE_MODE=auto
# Enable automatic language detection for responses
ENABLE_LANGUAGE_DETECTION=true
# Fixed language to use when response mode is 'fixed'
DEFAULT_FIXED_RESPONSE_LANGUAGE=en-US

# Conversation Context Management
# Maximum number of messages to include in context
MAX_CONTEXT_MESSAGES=12
# Strategy for conversation context: minimal, smart, or full
CONVERSATION_CONTEXT_STRATEGY=smart
# Prevent repetitive responses in conversations
PREVENT_REPETITIVE_RESPONSES=true
# Default number of messages for simple history mode
DEFAULT_HISTORY_MESSAGES_FOR_FALLBACK_CONTEXT=12

# Voice processing settings
# browser_webspeech_api or whisper_api
DEFAULT_SPEECH_PREFERENCE_STT=whisper_api
# browser_tts or openai_tts
DEFAULT_SPEECH_PREFERENCE_TTS_PROVIDER=openai_tts
WHISPER_API_ENABLED=true
VITE_USE_ADVANCED_CLIENT_AUDIO_PROCESSING=false

# TTS Performance Optimizations (New)
OPENAI_TTS_DEFAULT_MODEL=tts-1              # tts-1 (faster) or tts-1-hd (higher quality)
OPENAI_TTS_DEFAULT_VOICE=nova               # nova, alloy, echo, fable, onyx, shimmer
OPENAI_TTS_DEFAULT_SPEED=1.15               # 0.25 to 4.0 (1.15 = 15% faster)
OPENAI_TTS_DEFAULT_FORMAT=opus              # mp3, opus, aac, flac (opus = smaller files)

# TTS Cache Configuration
TTS_CACHE_MAX_SIZE_MB=100                   # Maximum cache size in megabytes
TTS_CACHE_MAX_ITEMS=500                     # Maximum number of cached audio items
TTS_CACHE_TTL_MS=3600000                    # Cache time-to-live in milliseconds (1 hour)

# Daily credit allocation (USD) before falling back to browser STT/TTS
CREDITS_PUBLIC_SPEECH_DAILY_USD=0.03
CREDITS_PUBLIC_LLM_DAILY_USD=0.05
CREDITS_METERED_SPEECH_DAILY_USD=0.90
CREDITS_METERED_LLM_DAILY_USD=1.75
CREDITS_GLOBAL_SPEECH_DAILY_USD=0.30
CREDITS_GLOBAL_LLM_DAILY_USD=0.45

# AgentOS configuration
MAX_ACTIVE_CONVERSATIONS_IN_MEMORY=1000
# If true, summarizes older parts of long conversations
ENABLE_CONVERSATION_SUMMARIZATION=true
SESSION_MAX_INACTIVITY_MINUTES=60
# Default utility model for AgentOS tasks
UTILITY_LLM_MODEL_ID=gpt-4o-mini

# Persona definitions path
PERSONA_DEFINITIONS_PATH=./backend/agentos/cognitive_substrate/personas/definitions

#-------------------------------------------------------------------------------
# SECTION 9: STORAGE CONFIGURATION
#-------------------------------------------------------------------------------

# Storage provider settings
STORAGE_PROVIDER=local_fs
LOCAL_STORAGE_BASE_PATH=./vca_storage

# Cloud storage (if needed)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_S3_BUCKET_NAME=
# AWS_S3_REGION=

#-------------------------------------------------------------------------------
# SECTION 10: PAYMENT INTEGRATION (LEMONSQUEEZY)
#-------------------------------------------------------------------------------

# LemonSqueezy API credentials (required if enabling personal subscriptions)
LEMONSQUEEZY_API_KEY=YOUR_LEMONSQUEEZY_API_KEY_HERE
LEMONSQUEEZY_STORE_ID=YOUR_LEMONSQUEEZY_STORE_ID_HERE
LEMONSQUEEZY_WEBHOOK_SECRET=YOUR_LEMONSQUEEZY_WEBHOOK_SECRET_HERE

# Plan-specific Lemon Squeezy mapping
LEMONSQUEEZY_BASIC_PRODUCT_ID=
LEMONSQUEEZY_BASIC_VARIANT_ID=
LEMONSQUEEZY_CREATOR_PRODUCT_ID=
LEMONSQUEEZY_CREATOR_VARIANT_ID=
LEMONSQUEEZY_ORG_PRODUCT_ID=
LEMONSQUEEZY_ORG_VARIANT_ID=

# Optional Stripe support
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_BASIC_PRODUCT_ID=
STRIPE_BASIC_PRICE_ID=
STRIPE_CREATOR_PRODUCT_ID=
STRIPE_CREATOR_PRICE_ID=
STRIPE_ORG_PRODUCT_ID=
STRIPE_ORG_PRICE_ID=

# Pricing configuration (used by docs / marketing copy)
LEMONSQUEEZY_BASIC_PRICE_MONTHLY_USD=9.00
LEMONSQUEEZY_CREATOR_PRICE_MONTHLY_USD=18.00
LEMONSQUEEZY_ORG_PRICE_MONTHLY_USD=99.00

# Frontend (Vite) plan IDs in frontend/.env(.local):
# VITE_LEMONSQUEEZY_BASIC_PRODUCT_ID=
# VITE_LEMONSQUEEZY_BASIC_VARIANT_ID=
# VITE_LEMONSQUEEZY_CREATOR_PRODUCT_ID=
# VITE_LEMONSQUEEZY_CREATOR_VARIANT_ID=
# VITE_LEMONSQUEEZY_ORG_PRODUCT_ID=
# VITE_LEMONSQUEEZY_ORG_VARIANT_ID=
# VITE_STRIPE_BASIC_PRICE_ID=
# VITE_STRIPE_CREATOR_PRICE_ID=
# VITE_STRIPE_ORG_PRICE_ID=
# VITE_SUPABASE_URL=
# VITE_SUPABASE_ANON_KEY=
#-------------------------------------------------------------------------------
# SECTION 11: FEATURE FLAGS & EXPERIMENTAL FEATURES
#-------------------------------------------------------------------------------

# Feature flags for Voice Chat Assistant
FEATURE_FLAG_ENABLE_GMI_VISUAL_INPUT_PROCESSING=false
FEATURE_FLAG_ENABLE_GMI_AUDIO_OUTPUT_TTS=true
FEATURE_FLAG_ENABLE_USER_UI_BLOCK_CREATION=true
FEATURE_FLAG_PERSISTENT_GMI_CONVERSATIONS=true
FEATURE_FLAG_RAG_ENABLE_ADVANCED_RETRANKING=false
FEATURE_FLAG_MEMORY_LIFECYCLE_AUTO_ENFORCEMENT=true
VITE_FEATURE_FLAG_ENABLE_INTERVIEW_MODE=true
VITE_FEATURE_FLAG_ENABLE_CODING_TUTOR_MODE=true
#-------------------------------------------------------------------------------
# SECTION 12: DEVELOPMENT & DEBUGGING
#-------------------------------------------------------------------------------

# Development settings
SERVE_FRONTEND=false
CLIENT_HEARTBEAT_INTERVAL_MS=30000

# Redis configuration (for production caching)
REDIS_URL=redis://localhost:6379

################################################################################
# End of Voice Chat Assistant Configuration
################################################################################




